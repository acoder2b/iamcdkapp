account_id: 
  - "118575936588"
region: "us-east-1"
stack_name: iampipeline-stack

roles:
  - roleName: test-sh-security-iamrole-breakglass
    description: "TELUS IAM Role for BreakGlass Access"
    sessionDuration: 28800
    iamPath: /breakglass/
    trustPolicy:
      Version: '2012-10-17'
      Statement:
        - Sid: Statement1
          Effect: Allow
          Principal:
            Service: sns.amazonaws.com
            AWS: >-
              arn:aws:iam::443253904861:role/service-role/AmazonSageMakerServiceCatalogProductsLaunchRole
          Action: 'sts:AssumeRole'
          Condition:
            Bool:
              'aws:MultiFactorAuthPresent': 'Null'
            StringEquals:
              'sts:ExternalId': '1312324242424'
    managedPolicies:
      - arn:aws:iam::aws:policy/AdministratorAccess
    # inlinePolicies:
    permissionBoundary: arn:aws:iam::aws:policy/AdministratorAccess
    tags:
      - key: testkey
        value: testtag1


  - roleName: testcrossaccountroletestmoderna
    description: 'testcrossaccountrole'
    sessionDuration: 3600
    # iamPath: /
    trustPolicy:
      Version: '2012-10-17'
      Statement:
      - Effect: Allow
        Principal:
          AWS:
          - arn:aws:iam::118575936588:root
        Action: sts:AssumeRole
        Condition: {}
    managedPolicies:
    - arn:aws:iam::aws:policy/AdministratorAccess
    # permissionBoundary: ''
    # tags:
    # - key: environment
    #   value: dev

iam_policies:
  - policyName: CustomPolicy1
    policyDocument:
      Version: '2012-10-17'
      Statement:
        - Effect: Allow
          Action:
            - s3:ListBucket
          Resource: 
            - arn:aws:s3:::example-bucket

  - policyName: CustomPolicy2
    policyDocument:
      Version: '2012-10-17'
      Statement:
        - Effect: Deny
          Action:
            - ec2:StartInstances
            - ec2:StopInstances
          Resource: "*"
          Condition:
            StringNotEquals:
              aws:username: "admin-user"
