2024-10-22 22:46:33,252 - INFO - Script started...
2024-10-22 22:46:33,270 - INFO - Found credentials in environment variables.
2024-10-22 22:46:33,423 - INFO - Fetched account ID: 118575936588
2024-10-22 22:46:33,468 - INFO - Listing IAM roles...
2024-10-22 22:46:33,732 - INFO - Total roles found after exclusion: 53
2024-10-22 22:46:33,761 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 22:46:34,462 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,462 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,463 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:34,575 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:46:34,576 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:46:34,576 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:46:34,664 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 22:46:34,744 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:46:34,744 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:46:34,905 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:46:34,905 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:46:34,905 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:46:34,905 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:46:34,905 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:46:34,995 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:46:34,995 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:46:35,152 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 22:46:36,396 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 22:46:36,480 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:46:36,481 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:46:36,554 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 22:46:36,635 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 22:46:36,946 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 22:46:37,182 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:46:37,182 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:46:37,259 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:46:37,259 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:46:37,259 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 22:46:37,261 - INFO - Roles provisioned by CloudFormation stacks: {'XenaAuditorRole-DO-NOT-DELETE', 'testcrossaccountrole', 'GitHubActionsRole', 'GitHubActionsRoleforIAMUser', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'CloudSecAuditRole', 'OrganizationAccountAccessRole', 'testcrossaccountrole112212', 'InternalAuditInternal', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'AdminTestnewApp', 'aws-controltower-AdministratorExecutionRole', 'IsengardRole-DO-NOT-DELETE', 'IsengardRoleForOptInComputeOptimizer', 'TurtleRoleManagement', 'test-role-breakglass-OIDC', 'AVMContainersUserRole', 'CloudSeerTrustedServiceRole', 'awslogs.prod.kelex.molecule.toppatterns', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'IAMConfigRoleforAutomation', 'GatedGardenAudit', 'AWSVAPTAudit', 'NawsApplicationMetrics-DO-NOT-DELETE', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'tenant-iam-acmcertificateprovisionrole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'AwsSecurityAudit', 'IsengardConfigRole', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'IsengardCloudTrailRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'tel-sh-security-iam-role-for-lambda', 'AwsSecurityNacundaAudit', 'EC2CapacityReservationService', 'IibsAdminAccess-DO-NOT-DELETE', 'Admin', 'GatedGardenInternalAudit', 'aws-controltower-ConfigRecorderRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'CodeGuruProfilerForwardToAmazonProfiler', 'AccessAnalyzerTrustedService', 'aws-controltower-ReadOnlyExecutionRole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'IMDSv2-automigrator', 'telus-security-audit-prowler-ecstaskrole1', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'importtestrole', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'test-role-iamrole-breakglass-1234', 'OrthancRole', 'ShadowTrooperRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'telus-security-audit-prowler-ecstaskrole', 'SaltyTrustedService', 'sec-IAMPasswordLambdaRole', 'aws-controltower-ForwardSnsNotificationRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'IsengardAuditorRole-DO-NOT-DELETE'}
2024-10-22 22:46:37,261 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 22:46:37,265 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 22:46:37,474 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 22:46:37,695 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:37,695 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:46:37,696 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 22:46:37,784 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 22:46:37,868 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 22:46:37,960 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 22:46:38,071 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 22:46:38,174 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 22:46:38,261 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 22:46:38,331 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 22:46:38,404 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 22:46:38,498 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 22:46:38,575 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 22:46:38,654 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 22:46:38,734 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 22:46:38,812 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 22:46:38,886 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 22:46:38,969 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 22:46:39,047 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 22:46:39,120 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 22:46:39,195 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 22:46:39,276 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 22:46:39,356 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 22:46:39,416 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 22:46:39,506 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 22:46:39,574 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 22:46:39,654 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:46:39,654 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 22:46:39,725 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 22:46:39,811 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 22:46:40,021 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:46:40,021 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:46:40,021 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:46:40,021 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 22:46:40,092 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 22:46:40,092 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 22:46:40,163 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 22:46:40,236 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 22:46:40,321 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 22:46:40,395 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 22:46:40,466 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 22:46:40,474 - INFO - Listing IAM customer-managed policies...
2024-10-22 22:46:40,609 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 22:46:40,610 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 22:46:40,612 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 22:48:18,153 - INFO - Script started...
2024-10-22 22:48:18,171 - INFO - Found credentials in environment variables.
2024-10-22 22:48:18,319 - INFO - Fetched account ID: 118575936588
2024-10-22 22:48:18,375 - INFO - Listing IAM roles...
2024-10-22 22:48:18,620 - INFO - Total roles found after exclusion: 53
2024-10-22 22:48:18,648 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 22:48:19,312 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,312 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,313 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:19,626 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:48:19,626 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:48:19,626 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:48:19,720 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 22:48:19,804 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:48:19,804 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:48:19,936 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:48:19,936 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:48:19,936 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:48:19,936 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:48:19,936 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:48:20,025 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:48:20,025 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:48:20,175 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 22:48:21,429 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 22:48:21,515 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:48:21,515 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:48:21,587 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 22:48:21,661 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 22:48:22,001 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 22:48:22,260 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:48:22,260 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:48:22,333 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:48:22,333 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:48:22,333 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 22:48:22,336 - INFO - Roles provisioned by CloudFormation stacks: {'awslogs.prod.kelex.molecule.toppatterns', 'InternalAuditInternal', 'tenant-iam-acmcertificateprovisionrole', 'TurtleRoleManagement', 'XenaAuditorRole-DO-NOT-DELETE', 'AWSVAPTAudit', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'telus-security-audit-prowler-ecstaskrole', 'Admin', 'CloudSecAuditRole', 'IsengardConfigRole', 'AwsSecurityNacundaAudit', 'CloudSeerTrustedServiceRole', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'importtestrole', 'AdminTestnewApp', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'OrganizationAccountAccessRole', 'IsengardRoleForOptInComputeOptimizer', 'AwsSecurityAudit', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'AVMContainersUserRole', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'aws-controltower-ReadOnlyExecutionRole', 'CodeGuruProfilerForwardToAmazonProfiler', 'OrthancRole', 'SaltyTrustedService', 'tel-sh-security-iam-role-for-lambda', 'IsengardRole-DO-NOT-DELETE', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'GatedGardenAudit', 'IAMConfigRoleforAutomation', 'sec-IAMPasswordLambdaRole', 'IsengardAuditorRole-DO-NOT-DELETE', 'aws-controltower-AdministratorExecutionRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'telus-security-audit-prowler-ecstaskrole1', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'IMDSv2-automigrator', 'AccessAnalyzerTrustedService', 'test-role-breakglass-OIDC', 'GitHubActionsRoleforIAMUser', 'testcrossaccountrole112212', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'aws-controltower-ConfigRecorderRole', 'IsengardCloudTrailRole', 'test-role-iamrole-breakglass-1234', 'EC2CapacityReservationService', 'GatedGardenInternalAudit', 'GitHubActionsRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'ShadowTrooperRole', 'IibsAdminAccess-DO-NOT-DELETE', 'NawsApplicationMetrics-DO-NOT-DELETE', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'aws-controltower-ForwardSnsNotificationRole', 'testcrossaccountrole'}
2024-10-22 22:48:22,336 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 22:48:22,340 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 22:48:22,556 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 22:48:22,747 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:22,747 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:48:22,747 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 22:48:22,840 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 22:48:22,924 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 22:48:22,997 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 22:48:23,137 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 22:48:23,239 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 22:48:23,319 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 22:48:23,401 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 22:48:23,485 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 22:48:23,569 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 22:48:23,646 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 22:48:23,720 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 22:48:23,794 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 22:48:23,875 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 22:48:23,952 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 22:48:24,031 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 22:48:24,108 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 22:48:24,178 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 22:48:24,265 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 22:48:24,336 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 22:48:24,403 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 22:48:24,495 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 22:48:24,585 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 22:48:24,648 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 22:48:24,749 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:48:24,749 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 22:48:24,828 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 22:48:24,945 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 22:48:25,041 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:48:25,041 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:48:25,041 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:48:25,041 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 22:48:25,105 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 22:48:25,105 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 22:48:25,183 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 22:48:25,290 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 22:48:25,365 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 22:48:25,443 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 22:48:25,505 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 22:48:25,513 - INFO - Listing IAM customer-managed policies...
2024-10-22 22:48:25,653 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 22:48:25,655 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 22:48:25,658 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 22:49:49,617 - INFO - Script started...
2024-10-22 22:49:49,637 - INFO - Found credentials in environment variables.
2024-10-22 22:49:49,782 - INFO - Fetched account ID: 118575936588
2024-10-22 22:49:49,831 - INFO - Listing IAM roles...
2024-10-22 22:49:50,094 - INFO - Total roles found after exclusion: 53
2024-10-22 22:49:50,123 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 22:49:50,768 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,768 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,769 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:50,863 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:49:50,863 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:49:50,863 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:49:50,943 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 22:49:51,021 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:49:51,021 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:49:51,173 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:49:51,173 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:49:51,173 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:49:51,173 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:49:51,173 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:49:51,264 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:49:51,264 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:49:51,419 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 22:49:52,604 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 22:49:52,681 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:49:52,681 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:49:52,759 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 22:49:52,842 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 22:49:53,171 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 22:49:53,396 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:49:53,396 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:49:53,477 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:49:53,477 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:49:53,478 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 22:49:53,479 - INFO - Roles provisioned by CloudFormation stacks: {'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'TurtleRoleManagement', 'GatedGardenAudit', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'aws-controltower-ReadOnlyExecutionRole', 'aws-controltower-ConfigRecorderRole', 'SaltyTrustedService', 'AWSVAPTAudit', 'sec-IAMPasswordLambdaRole', 'AwsSecurityNacundaAudit', 'telus-security-audit-prowler-ecstaskrole1', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'IsengardConfigRole', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'Admin', 'OrganizationAccountAccessRole', 'testcrossaccountrole112212', 'testcrossaccountrole', 'EC2CapacityReservationService', 'InternalAuditInternal', 'test-role-breakglass-OIDC', 'IMDSv2-automigrator', 'IAMConfigRoleforAutomation', 'AVMContainersUserRole', 'OrthancRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'IsengardAuditorRole-DO-NOT-DELETE', 'ShadowTrooperRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'GitHubActionsRole', 'aws-controltower-AdministratorExecutionRole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'tel-sh-security-iam-role-for-lambda', 'NawsApplicationMetrics-DO-NOT-DELETE', 'IsengardRole-DO-NOT-DELETE', 'CloudSecAuditRole', 'CloudSeerTrustedServiceRole', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'telus-security-audit-prowler-ecstaskrole', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'IibsAdminAccess-DO-NOT-DELETE', 'IsengardRoleForOptInComputeOptimizer', 'CodeGuruProfilerForwardToAmazonProfiler', 'GatedGardenInternalAudit', 'test-role-iamrole-breakglass-1234', 'GitHubActionsRoleforIAMUser', 'aws-controltower-ForwardSnsNotificationRole', 'importtestrole', 'AwsSecurityAudit', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'IsengardCloudTrailRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'AdminTestnewApp', 'tenant-iam-acmcertificateprovisionrole', 'AccessAnalyzerTrustedService', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'XenaAuditorRole-DO-NOT-DELETE', 'awslogs.prod.kelex.molecule.toppatterns'}
2024-10-22 22:49:53,479 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 22:49:53,483 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 22:49:53,693 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 22:49:53,934 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:53,934 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:49:53,934 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 22:49:54,039 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 22:49:54,118 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 22:49:54,202 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 22:49:54,316 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 22:49:54,415 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 22:49:54,517 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 22:49:54,591 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 22:49:54,676 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 22:49:54,748 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 22:49:54,822 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 22:49:54,895 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 22:49:54,969 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 22:49:55,043 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 22:49:55,113 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 22:49:55,190 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 22:49:55,260 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 22:49:55,335 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 22:49:55,406 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 22:49:55,478 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 22:49:55,548 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 22:49:55,615 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 22:49:55,704 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 22:49:55,774 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 22:49:55,855 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:49:55,855 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 22:49:55,937 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 22:49:56,030 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 22:49:56,152 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:49:56,152 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:49:56,152 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:49:56,152 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 22:49:56,224 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 22:49:56,224 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 22:49:56,296 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 22:49:56,374 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 22:49:56,473 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 22:49:56,559 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 22:49:56,632 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 22:49:56,640 - INFO - Listing IAM customer-managed policies...
2024-10-22 22:49:56,777 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 22:49:56,779 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 22:49:56,782 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 22:52:38,126 - INFO - Script started...
2024-10-22 22:52:38,144 - INFO - Found credentials in environment variables.
2024-10-22 22:52:38,285 - INFO - Fetched account ID: 118575936588
2024-10-22 22:52:38,333 - INFO - Listing IAM roles...
2024-10-22 22:52:38,584 - INFO - Total roles found after exclusion: 53
2024-10-22 22:52:38,610 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 22:52:39,268 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,268 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,269 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:39,360 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:52:39,360 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:52:39,360 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:52:39,446 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 22:52:39,537 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:52:39,537 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:52:39,653 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:52:39,653 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:52:39,653 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:52:39,653 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:52:39,653 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:52:39,758 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:52:39,758 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:52:39,919 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 22:52:41,187 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 22:52:41,274 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:52:41,274 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:52:41,346 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 22:52:41,440 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 22:52:41,767 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 22:52:42,010 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:52:42,010 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:52:42,086 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:52:42,087 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:52:42,087 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 22:52:42,089 - INFO - Roles provisioned by CloudFormation stacks: {'OrthancRole', 'awslogs.prod.kelex.molecule.toppatterns', 'CloudSecAuditRole', 'AccessAnalyzerTrustedService', 'OrganizationAccountAccessRole', 'test-role-breakglass-OIDC', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'aws-controltower-ForwardSnsNotificationRole', 'CodeGuruProfilerForwardToAmazonProfiler', 'XenaAuditorRole-DO-NOT-DELETE', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'AdminTestnewApp', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'aws-controltower-AdministratorExecutionRole', 'AWSVAPTAudit', 'TurtleRoleManagement', 'IMDSv2-automigrator', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'AwsSecurityNacundaAudit', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'testcrossaccountrole', 'SaltyTrustedService', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'telus-security-audit-prowler-ecstaskrole1', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'testcrossaccountrole112212', 'CloudSeerTrustedServiceRole', 'IsengardRoleForOptInComputeOptimizer', 'aws-controltower-ReadOnlyExecutionRole', 'GatedGardenAudit', 'IibsAdminAccess-DO-NOT-DELETE', 'importtestrole', 'IsengardCloudTrailRole', 'telus-security-audit-prowler-ecstaskrole', 'tenant-iam-acmcertificateprovisionrole', 'GitHubActionsRole', 'IsengardAuditorRole-DO-NOT-DELETE', 'tel-sh-security-iam-role-for-lambda', 'GitHubActionsRoleforIAMUser', 'InternalAuditInternal', 'ShadowTrooperRole', 'sec-IAMPasswordLambdaRole', 'EC2CapacityReservationService', 'IsengardRole-DO-NOT-DELETE', 'AwsSecurityAudit', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'Admin', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'aws-controltower-ConfigRecorderRole', 'AVMContainersUserRole', 'NawsApplicationMetrics-DO-NOT-DELETE', 'GatedGardenInternalAudit', 'IsengardConfigRole', 'test-role-iamrole-breakglass-1234'}
2024-10-22 22:52:42,089 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 22:52:42,093 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 22:52:42,301 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 22:52:42,503 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:42,503 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:52:42,503 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 22:52:42,591 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 22:52:42,675 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 22:52:42,803 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 22:52:42,927 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 22:52:43,051 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 22:52:43,157 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 22:52:43,230 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 22:52:43,316 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 22:52:43,392 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 22:52:43,461 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 22:52:43,533 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 22:52:43,615 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 22:52:43,710 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 22:52:43,786 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 22:52:43,888 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 22:52:43,969 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 22:52:44,058 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 22:52:44,131 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 22:52:44,205 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 22:52:44,307 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 22:52:44,394 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 22:52:44,496 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 22:52:44,577 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 22:52:44,668 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:52:44,668 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 22:52:44,758 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 22:52:44,854 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 22:52:44,984 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:52:44,984 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:52:44,984 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:52:44,984 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 22:52:45,053 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 22:52:45,053 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 22:52:45,115 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 22:52:45,189 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 22:52:45,277 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 22:52:45,348 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 22:52:45,433 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 22:52:45,441 - INFO - Listing IAM customer-managed policies...
2024-10-22 22:52:45,615 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 22:52:45,617 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 22:52:45,619 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 22:54:30,455 - INFO - Script started...
2024-10-22 22:54:30,474 - INFO - Found credentials in environment variables.
2024-10-22 22:54:30,666 - INFO - Fetched account ID: 118575936588
2024-10-22 22:54:30,721 - INFO - Listing IAM roles...
2024-10-22 22:54:30,974 - INFO - Total roles found after exclusion: 53
2024-10-22 22:54:31,002 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 22:54:31,664 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,664 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,665 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,665 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,665 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,665 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,665 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:31,750 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:54:31,750 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:54:31,750 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:54:31,831 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 22:54:31,934 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:54:31,934 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:54:32,085 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:54:32,085 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:54:32,085 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:54:32,085 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:54:32,085 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:54:32,180 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:54:32,180 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:54:32,335 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 22:54:33,580 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 22:54:33,670 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:54:33,671 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:54:33,754 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 22:54:33,832 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 22:54:34,060 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 22:54:34,304 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:54:34,304 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:54:34,388 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:54:34,388 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:54:34,388 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 22:54:34,390 - INFO - Roles provisioned by CloudFormation stacks: {'CloudSeerTrustedServiceRole', 'IsengardConfigRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'aws-controltower-ReadOnlyExecutionRole', 'aws-controltower-ForwardSnsNotificationRole', 'IsengardRole-DO-NOT-DELETE', 'XenaAuditorRole-DO-NOT-DELETE', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'Admin', 'GatedGardenInternalAudit', 'test-role-iamrole-breakglass-1234', 'IsengardRoleForOptInComputeOptimizer', 'AwsSecurityNacundaAudit', 'AdminTestnewApp', 'AccessAnalyzerTrustedService', 'tel-sh-security-iam-role-for-lambda', 'testcrossaccountrole', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'importtestrole', 'InternalAuditInternal', 'EC2CapacityReservationService', 'telus-security-audit-prowler-ecstaskrole1', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'GitHubActionsRole', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'OrganizationAccountAccessRole', 'aws-controltower-AdministratorExecutionRole', 'testcrossaccountrole112212', 'awslogs.prod.kelex.molecule.toppatterns', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'sec-IAMPasswordLambdaRole', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'AVMContainersUserRole', 'CloudSecAuditRole', 'SaltyTrustedService', 'CodeGuruProfilerForwardToAmazonProfiler', 'OrthancRole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'GitHubActionsRoleforIAMUser', 'IibsAdminAccess-DO-NOT-DELETE', 'aws-controltower-ConfigRecorderRole', 'GatedGardenAudit', 'tenant-iam-acmcertificateprovisionrole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'IsengardCloudTrailRole', 'test-role-breakglass-OIDC', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'TurtleRoleManagement', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'telus-security-audit-prowler-ecstaskrole', 'ShadowTrooperRole', 'NawsApplicationMetrics-DO-NOT-DELETE', 'IMDSv2-automigrator', 'IsengardAuditorRole-DO-NOT-DELETE', 'AwsSecurityAudit', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'AWSVAPTAudit', 'TELUS-EventBridge-RoletoPublishto-CentralAccount'}
2024-10-22 22:54:34,391 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 22:54:34,394 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 22:54:34,558 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 22:54:34,747 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:34,747 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:54:34,747 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 22:54:34,826 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 22:54:34,909 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 22:54:34,989 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 22:54:35,106 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 22:54:35,221 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 22:54:35,338 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 22:54:35,409 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 22:54:35,484 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 22:54:35,549 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 22:54:35,622 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 22:54:35,692 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 22:54:35,762 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 22:54:35,829 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 22:54:35,897 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 22:54:35,969 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 22:54:36,038 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 22:54:36,107 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 22:54:36,190 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 22:54:36,261 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 22:54:36,343 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 22:54:36,404 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 22:54:36,493 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 22:54:36,559 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 22:54:36,645 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:54:36,646 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 22:54:36,712 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 22:54:36,794 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 22:54:36,879 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:54:36,880 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:54:36,880 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:54:36,880 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 22:54:36,939 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 22:54:36,939 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 22:54:37,005 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 22:54:37,091 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 22:54:37,169 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 22:54:37,234 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 22:54:37,313 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 22:54:37,321 - INFO - Listing IAM customer-managed policies...
2024-10-22 22:54:37,453 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 22:54:37,455 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 22:54:37,456 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 22:57:22,975 - INFO - Script started...
2024-10-22 22:57:22,993 - INFO - Found credentials in environment variables.
2024-10-22 22:57:23,141 - INFO - Fetched account ID: 118575936588
2024-10-22 22:57:23,186 - INFO - Listing IAM roles...
2024-10-22 22:57:23,448 - INFO - Total roles found after exclusion: 53
2024-10-22 22:57:23,477 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 22:57:23,973 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,973 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:23,974 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:24,066 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:57:24,066 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:57:24,066 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:57:24,143 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 22:57:24,233 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:57:24,233 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:57:24,375 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:57:24,375 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:57:24,375 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:57:24,375 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:57:24,375 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:57:24,467 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:57:24,468 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:57:24,632 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 22:57:25,850 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 22:57:25,965 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:57:25,965 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:57:26,046 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 22:57:26,130 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 22:57:26,409 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 22:57:26,636 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:57:26,636 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:57:26,706 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:57:26,706 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:57:26,706 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 22:57:26,708 - INFO - Roles provisioned by CloudFormation stacks: {'TurtleRoleManagement', 'test-role-iamrole-breakglass-1234', 'CodeGuruProfilerForwardToAmazonProfiler', 'telus-security-audit-prowler-ecstaskrole1', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'IsengardAuditorRole-DO-NOT-DELETE', 'importtestrole', 'GitHubActionsRole', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'tel-sh-security-iam-role-for-lambda', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'OrganizationAccountAccessRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'CloudSeerTrustedServiceRole', 'InternalAuditInternal', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'telus-security-audit-prowler-ecstaskrole', 'test-role-breakglass-OIDC', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'Admin', 'SaltyTrustedService', 'GatedGardenInternalAudit', 'AVMContainersUserRole', 'AccessAnalyzerTrustedService', 'AdminTestnewApp', 'IibsAdminAccess-DO-NOT-DELETE', 'AwsSecurityNacundaAudit', 'IsengardCloudTrailRole', 'tenant-iam-acmcertificateprovisionrole', 'testcrossaccountrole112212', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'aws-controltower-AdministratorExecutionRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'NawsApplicationMetrics-DO-NOT-DELETE', 'AWSVAPTAudit', 'GitHubActionsRoleforIAMUser', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'aws-controltower-ConfigRecorderRole', 'ShadowTrooperRole', 'GatedGardenAudit', 'IsengardRoleForOptInComputeOptimizer', 'testcrossaccountrole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'CloudSecAuditRole', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'IsengardRole-DO-NOT-DELETE', 'aws-controltower-ForwardSnsNotificationRole', 'awslogs.prod.kelex.molecule.toppatterns', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'XenaAuditorRole-DO-NOT-DELETE', 'EC2CapacityReservationService', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'OrthancRole', 'IMDSv2-automigrator', 'sec-IAMPasswordLambdaRole', 'AwsSecurityAudit', 'aws-controltower-ReadOnlyExecutionRole', 'IAMConfigRoleforAutomation', 'IsengardConfigRole', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role'}
2024-10-22 22:57:26,709 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 22:57:26,712 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 22:57:26,935 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 22:57:27,140 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:27,140 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:57:27,140 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 22:57:27,240 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 22:57:27,332 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 22:57:27,413 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 22:57:27,528 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 22:57:27,627 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 22:57:27,750 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 22:57:27,821 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 22:57:27,892 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 22:57:27,978 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 22:57:28,058 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 22:57:28,133 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 22:57:28,201 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 22:57:28,274 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 22:57:28,346 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 22:57:28,425 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 22:57:28,503 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 22:57:28,594 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 22:57:28,673 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 22:57:28,753 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 22:57:28,825 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 22:57:28,894 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 22:57:29,036 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 22:57:29,112 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 22:57:29,188 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:57:29,188 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 22:57:29,261 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 22:57:29,352 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 22:57:29,439 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:57:29,439 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:57:29,439 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:57:29,439 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 22:57:29,501 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 22:57:29,501 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 22:57:29,572 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 22:57:29,648 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 22:57:29,730 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 22:57:29,843 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 22:57:29,920 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 22:57:29,928 - INFO - Listing IAM customer-managed policies...
2024-10-22 22:57:30,064 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 22:57:30,066 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 22:57:30,067 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 22:58:47,922 - INFO - Script started...
2024-10-22 22:58:47,941 - INFO - Found credentials in environment variables.
2024-10-22 22:58:48,090 - INFO - Fetched account ID: 118575936588
2024-10-22 22:58:48,137 - INFO - Listing IAM roles...
2024-10-22 22:58:48,401 - INFO - Total roles found after exclusion: 53
2024-10-22 22:58:48,430 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 22:58:48,967 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,967 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,967 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,967 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,967 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,967 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,967 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,967 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:48,968 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:49,072 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:58:49,072 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:58:49,072 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 22:58:49,178 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 22:58:49,263 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:58:49,263 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 22:58:49,389 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:58:49,389 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:58:49,389 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:58:49,389 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:58:49,389 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 22:58:49,485 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:58:49,485 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 22:58:49,682 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 22:58:50,882 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 22:58:50,961 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:58:50,961 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:58:51,041 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 22:58:51,136 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 22:58:51,463 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 22:58:51,764 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:58:51,764 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 22:58:51,839 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:58:51,839 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 22:58:51,839 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 22:58:51,841 - INFO - Roles provisioned by CloudFormation stacks: {'GitHubActionsRoleforIAMUser', 'NawsApplicationMetrics-DO-NOT-DELETE', 'ShadowTrooperRole', 'tenant-iam-acmcertificateprovisionrole', 'IsengardCloudTrailRole', 'IMDSv2-automigrator', 'sec-IAMPasswordLambdaRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'testcrossaccountrole', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'telus-security-audit-prowler-ecstaskrole', 'aws-controltower-ForwardSnsNotificationRole', 'IsengardAuditorRole-DO-NOT-DELETE', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'GatedGardenInternalAudit', 'AdminTestnewApp', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'EC2CapacityReservationService', 'CloudSeerTrustedServiceRole', 'AVMContainersUserRole', 'AWSVAPTAudit', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'IsengardRole-DO-NOT-DELETE', 'GitHubActionsRole', 'aws-controltower-AdministratorExecutionRole', 'test-role-iamrole-breakglass-1234', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'CloudSecAuditRole', 'AwsSecurityNacundaAudit', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'IsengardRoleForOptInComputeOptimizer', 'CodeGuruProfilerForwardToAmazonProfiler', 'XenaAuditorRole-DO-NOT-DELETE', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'AccessAnalyzerTrustedService', 'GatedGardenAudit', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'testcrossaccountrole112212', 'awslogs.prod.kelex.molecule.toppatterns', 'test-role-breakglass-OIDC', 'Admin', 'IsengardConfigRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'aws-controltower-ConfigRecorderRole', 'tel-sh-security-iam-role-for-lambda', 'InternalAuditInternal', 'aws-controltower-ReadOnlyExecutionRole', 'SaltyTrustedService', 'TurtleRoleManagement', 'importtestrole', 'AwsSecurityAudit', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'OrganizationAccountAccessRole', 'IibsAdminAccess-DO-NOT-DELETE', 'telus-security-audit-prowler-ecstaskrole1', 'OrthancRole'}
2024-10-22 22:58:51,841 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 22:58:51,845 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 22:58:52,047 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 22:58:52,252 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:52,252 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 22:58:52,252 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 22:58:52,347 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 22:58:52,426 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 22:58:52,512 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 22:58:52,636 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 22:58:52,729 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 22:58:52,830 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 22:58:52,895 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 22:58:52,974 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 22:58:53,046 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 22:58:53,131 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 22:58:53,199 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 22:58:53,265 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 22:58:53,334 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 22:58:53,412 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 22:58:53,502 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 22:58:53,575 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 22:58:53,654 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 22:58:53,739 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 22:58:53,810 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 22:58:53,880 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 22:58:53,953 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 22:58:54,041 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 22:58:54,106 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 22:58:54,187 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 22:58:54,187 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 22:58:54,268 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 22:58:54,345 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 22:58:54,469 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:58:54,469 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:58:54,469 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 22:58:54,469 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 22:58:54,546 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 22:58:54,546 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 22:58:54,625 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 22:58:54,708 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 22:58:54,777 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 22:58:54,868 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 22:58:54,930 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 22:58:54,938 - INFO - Listing IAM customer-managed policies...
2024-10-22 22:58:55,069 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 22:58:55,071 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 22:58:55,074 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:01:08,590 - INFO - Script started...
2024-10-22 23:01:08,609 - INFO - Found credentials in environment variables.
2024-10-22 23:01:08,755 - INFO - Fetched account ID: 118575936588
2024-10-22 23:01:08,800 - INFO - Listing IAM roles...
2024-10-22 23:01:09,068 - INFO - Total roles found after exclusion: 53
2024-10-22 23:01:09,096 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:01:09,803 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,803 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,804 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:09,910 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:01:09,916 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:01:09,916 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:01:10,004 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:01:10,105 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:01:10,105 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:01:10,230 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:01:10,230 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:01:10,230 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:01:10,230 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:01:10,230 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:01:10,331 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:01:10,331 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:01:10,484 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:01:11,739 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:01:11,834 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:01:11,834 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:01:11,901 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:01:11,989 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:01:12,251 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:01:12,497 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:01:12,497 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:01:12,574 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:01:12,574 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:01:12,574 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:01:12,577 - INFO - Roles provisioned by CloudFormation stacks: {'IsengardRoleForOptInComputeOptimizer', 'tenant-iam-acmcertificateprovisionrole', 'SaltyTrustedService', 'telus-security-audit-prowler-ecstaskrole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'awslogs.prod.kelex.molecule.toppatterns', 'ShadowTrooperRole', 'GitHubActionsRoleforIAMUser', 'Admin', 'OrthancRole', 'IsengardCloudTrailRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'OrganizationAccountAccessRole', 'TurtleRoleManagement', 'CodeGuruProfilerForwardToAmazonProfiler', 'sec-IAMPasswordLambdaRole', 'AVMContainersUserRole', 'aws-controltower-ForwardSnsNotificationRole', 'GatedGardenInternalAudit', 'IibsAdminAccess-DO-NOT-DELETE', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'aws-controltower-ReadOnlyExecutionRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'GitHubActionsRole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'CloudSeerTrustedServiceRole', 'testcrossaccountrole', 'XenaAuditorRole-DO-NOT-DELETE', 'EC2CapacityReservationService', 'CloudSecAuditRole', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'AdminTestnewApp', 'NawsApplicationMetrics-DO-NOT-DELETE', 'aws-controltower-AdministratorExecutionRole', 'AWSVAPTAudit', 'AccessAnalyzerTrustedService', 'GatedGardenAudit', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'tel-sh-security-iam-role-for-lambda', 'AwsSecurityAudit', 'test-role-breakglass-OIDC', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'telus-security-audit-prowler-ecstaskrole1', 'IsengardConfigRole', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'testcrossaccountrole112212', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'IsengardRole-DO-NOT-DELETE', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'InternalAuditInternal', 'AwsSecurityNacundaAudit', 'test-role-iamrole-breakglass-1234', 'aws-controltower-ConfigRecorderRole', 'IsengardAuditorRole-DO-NOT-DELETE', 'importtestrole', 'IAMConfigRoleforAutomation', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'IMDSv2-automigrator'}
2024-10-22 23:01:12,577 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:01:12,581 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:01:12,816 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:01:13,009 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:13,009 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:01:13,009 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:01:13,097 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:01:13,192 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:01:13,272 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:01:13,389 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:01:13,493 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:01:13,601 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:01:13,678 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:01:13,750 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:01:13,822 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:01:13,895 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:01:13,964 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:01:14,034 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:01:14,109 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:01:14,185 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:01:14,261 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:01:14,335 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:01:14,408 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:01:14,487 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:01:14,562 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:01:14,641 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:01:14,712 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:01:14,801 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:01:14,880 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:01:14,966 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:01:14,966 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:01:15,038 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:01:15,142 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:01:15,251 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:01:15,251 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:01:15,251 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:01:15,251 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:01:15,325 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:01:15,325 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:01:15,404 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:01:15,491 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:01:15,572 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:01:15,651 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:01:15,742 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:01:15,750 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:01:15,876 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:01:15,877 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:01:15,879 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:06:10,793 - INFO - Script started...
2024-10-22 23:06:10,811 - INFO - Found credentials in environment variables.
2024-10-22 23:06:10,958 - INFO - Fetched account ID: 118575936588
2024-10-22 23:06:11,013 - INFO - Listing IAM roles...
2024-10-22 23:06:11,274 - INFO - Total roles found after exclusion: 53
2024-10-22 23:06:11,305 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:06:12,023 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,023 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,024 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:12,126 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:06:12,126 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:06:12,126 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:06:12,228 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:06:12,325 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:06:12,325 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:06:12,503 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:06:12,503 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:06:12,503 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:06:12,503 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:06:12,503 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:06:12,596 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:06:12,596 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:06:12,760 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:06:13,982 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:06:14,074 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:06:14,074 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:06:14,151 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:06:14,244 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:06:14,515 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:06:14,752 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:06:14,752 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:06:14,830 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:06:14,830 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:06:14,830 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:06:14,833 - INFO - Roles provisioned by CloudFormation stacks: {'testcrossaccountrole', 'aws-controltower-ConfigRecorderRole', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'IsengardAuditorRole-DO-NOT-DELETE', 'Admin', 'ShadowTrooperRole', 'GitHubActionsRoleforIAMUser', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'NawsApplicationMetrics-DO-NOT-DELETE', 'IAMConfigRoleforAutomation', 'SaltyTrustedService', 'sec-IAMPasswordLambdaRole', 'AccessAnalyzerTrustedService', 'IsengardCloudTrailRole', 'importtestrole', 'GitHubActionsRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'IsengardRoleForOptInComputeOptimizer', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'test-role-iamrole-breakglass-1234', 'IsengardRole-DO-NOT-DELETE', 'TurtleRoleManagement', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'OrganizationAccountAccessRole', 'aws-controltower-AdministratorExecutionRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'awslogs.prod.kelex.molecule.toppatterns', 'telus-security-audit-prowler-ecstaskrole', 'telus-security-audit-prowler-ecstaskrole1', 'testcrossaccountrole112212', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'aws-controltower-ReadOnlyExecutionRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'InternalAuditInternal', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'IsengardConfigRole', 'IibsAdminAccess-DO-NOT-DELETE', 'tenant-iam-acmcertificateprovisionrole', 'GatedGardenInternalAudit', 'AwsSecurityAudit', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'AVMContainersUserRole', 'EC2CapacityReservationService', 'CodeGuruProfilerForwardToAmazonProfiler', 'CloudSeerTrustedServiceRole', 'GatedGardenAudit', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'test-role-breakglass-OIDC', 'tel-sh-security-iam-role-for-lambda', 'AwsSecurityNacundaAudit', 'CloudSecAuditRole', 'IMDSv2-automigrator', 'AdminTestnewApp', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'AWSVAPTAudit', 'OrthancRole', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'aws-controltower-ForwardSnsNotificationRole', 'XenaAuditorRole-DO-NOT-DELETE', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE'}
2024-10-22 23:06:14,833 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:06:14,837 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:06:15,051 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:06:15,301 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:15,301 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:06:15,301 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:06:15,394 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:06:15,476 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:06:15,572 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:06:15,689 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:06:15,800 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:06:15,900 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:06:15,972 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:06:16,048 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:06:16,128 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:06:16,208 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:06:16,276 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:06:16,349 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:06:16,438 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:06:16,524 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:06:16,605 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:06:16,676 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:06:16,744 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:06:16,818 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:06:16,884 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:06:16,969 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:06:17,031 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:06:17,110 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:06:17,187 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:06:17,262 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:06:17,262 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:06:17,327 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:06:17,405 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:06:17,537 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:06:17,537 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:06:17,537 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:06:17,537 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:06:17,619 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:06:17,619 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:06:17,697 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:06:17,775 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:06:17,868 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:06:17,939 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:06:18,009 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:06:18,017 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:06:18,161 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:06:18,163 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:06:18,164 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:18:50,760 - INFO - Script started...
2024-10-22 23:18:50,778 - INFO - Found credentials in environment variables.
2024-10-22 23:18:50,939 - INFO - Fetched account ID: 118575936588
2024-10-22 23:18:50,994 - INFO - Listing IAM roles...
2024-10-22 23:18:51,257 - INFO - Total roles found after exclusion: 53
2024-10-22 23:18:51,288 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:18:51,972 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,972 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:51,973 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:52,092 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:18:52,092 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:18:52,092 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:18:52,185 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:18:52,273 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:18:52,273 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:18:52,399 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:18:52,399 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:18:52,399 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:18:52,399 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:18:52,399 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:18:52,491 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:18:52,491 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:18:52,661 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:18:53,934 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:18:54,033 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:18:54,033 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:18:54,110 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:18:54,245 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:18:54,591 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:18:54,826 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:18:54,826 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:18:54,902 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:18:54,902 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:18:54,902 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:18:54,905 - INFO - Roles provisioned by CloudFormation stacks: {'tenant-iam-acmcertificateprovisionrole', 'GitHubActionsRoleforIAMUser', 'testcrossaccountrole112212', 'IsengardConfigRole', 'telus-security-audit-prowler-ecstaskrole1', 'telus-security-audit-prowler-ecstaskrole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'tel-sh-security-iam-role-for-lambda', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'importtestrole', 'AwsSecurityNacundaAudit', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'TurtleRoleManagement', 'IsengardRoleForOptInComputeOptimizer', 'IsengardCloudTrailRole', 'CloudSeerTrustedServiceRole', 'ShadowTrooperRole', 'AwsSecurityAudit', 'IAMConfigRoleforAutomation', 'test-role-breakglass-OIDC', 'IibsAdminAccess-DO-NOT-DELETE', 'testcrossaccountrole', 'AccessAnalyzerTrustedService', 'Admin', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'aws-controltower-ForwardSnsNotificationRole', 'GatedGardenAudit', 'IsengardRole-DO-NOT-DELETE', 'OrthancRole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'XenaAuditorRole-DO-NOT-DELETE', 'IsengardAuditorRole-DO-NOT-DELETE', 'SaltyTrustedService', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'CodeGuruProfilerForwardToAmazonProfiler', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'sec-IAMPasswordLambdaRole', 'GitHubActionsRole', 'AdminTestnewApp', 'aws-controltower-ConfigRecorderRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'OrganizationAccountAccessRole', 'EC2CapacityReservationService', 'InternalAuditInternal', 'awslogs.prod.kelex.molecule.toppatterns', 'aws-controltower-AdministratorExecutionRole', 'GatedGardenInternalAudit', 'NawsApplicationMetrics-DO-NOT-DELETE', 'AVMContainersUserRole', 'AWSVAPTAudit', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'aws-controltower-ReadOnlyExecutionRole', 'IMDSv2-automigrator', 'CloudSecAuditRole'}
2024-10-22 23:18:54,905 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:18:54,909 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:18:55,075 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:18:55,364 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:55,364 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:18:55,364 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:18:55,458 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:18:55,543 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:18:55,660 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:18:55,775 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:18:55,875 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:18:55,965 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:18:56,041 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:18:56,111 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:18:56,185 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:18:56,262 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:18:56,344 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:18:56,415 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:18:56,488 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:18:56,582 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:18:56,650 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:18:56,715 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:18:56,791 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:18:56,864 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:18:56,943 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:18:57,019 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:18:57,089 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:18:57,184 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:18:57,255 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:18:57,331 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:18:57,331 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:18:57,402 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:18:57,485 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:18:57,575 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:18:57,575 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:18:57,575 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:18:57,576 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:18:57,648 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:18:57,648 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:18:57,723 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:18:57,803 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:18:57,885 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:18:57,959 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:18:58,034 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:18:58,041 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:18:58,181 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:18:58,183 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:18:58,186 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:30:50,831 - INFO - Script started...
2024-10-22 23:30:50,850 - INFO - Found credentials in environment variables.
2024-10-22 23:30:51,994 - INFO - Fetched account ID: 118575936588
2024-10-22 23:30:52,052 - INFO - Listing IAM roles...
2024-10-22 23:30:52,316 - INFO - Total roles found after exclusion: 53
2024-10-22 23:30:52,345 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:30:52,994 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,994 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:52,995 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:53,103 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:30:53,103 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:30:53,103 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:30:53,192 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:30:53,299 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:30:53,299 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:30:53,482 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:30:53,482 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:30:53,482 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:30:53,482 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:30:53,483 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:30:53,583 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:30:53,583 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:30:53,790 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:30:55,067 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:30:55,147 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:30:55,148 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:30:55,222 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:30:55,304 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:30:55,641 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:30:55,896 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:30:55,896 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:30:55,976 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:30:55,977 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:30:55,977 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:30:55,979 - INFO - Roles provisioned by CloudFormation stacks: {'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'NawsApplicationMetrics-DO-NOT-DELETE', 'aws-controltower-ForwardSnsNotificationRole', 'IibsAdminAccess-DO-NOT-DELETE', 'test-role-breakglass-OIDC', 'IAMConfigRoleforAutomation', 'testcrossaccountrole112212', 'telus-security-audit-prowler-ecstaskrole1', 'AwsSecurityNacundaAudit', 'OrganizationAccountAccessRole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'aws-controltower-ReadOnlyExecutionRole', 'InternalAuditInternal', 'sec-IAMPasswordLambdaRole', 'AVMContainersUserRole', 'tenant-iam-acmcertificateprovisionrole', 'CloudSecAuditRole', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'aws-controltower-AdministratorExecutionRole', 'AWSVAPTAudit', 'GatedGardenInternalAudit', 'IsengardRole-DO-NOT-DELETE', 'AdminTestnewApp', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'testcrossaccountrole', 'IsengardAuditorRole-DO-NOT-DELETE', 'ShadowTrooperRole', 'TurtleRoleManagement', 'XenaAuditorRole-DO-NOT-DELETE', 'AwsSecurityAudit', 'CloudSeerTrustedServiceRole', 'EC2CapacityReservationService', 'IsengardCloudTrailRole', 'awslogs.prod.kelex.molecule.toppatterns', 'aws-controltower-ConfigRecorderRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'OrthancRole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'AccessAnalyzerTrustedService', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'GatedGardenAudit', 'telus-security-audit-prowler-ecstaskrole', 'IsengardRoleForOptInComputeOptimizer', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'test-role-iamrole-breakglass-1234', 'importtestrole', 'IsengardConfigRole', 'CodeGuruProfilerForwardToAmazonProfiler', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'GitHubActionsRole', 'GitHubActionsRoleforIAMUser', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'SaltyTrustedService', 'IMDSv2-automigrator', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'tel-sh-security-iam-role-for-lambda', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'Admin'}
2024-10-22 23:30:55,979 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:30:55,983 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:30:56,189 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:30:56,391 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:56,391 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:30:56,391 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:30:56,468 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:30:56,557 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:30:56,638 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:30:56,792 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:30:56,892 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:30:56,998 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:30:57,061 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:30:57,138 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:30:57,207 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:30:57,286 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:30:57,351 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:30:57,421 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:30:57,491 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:30:57,552 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:30:57,617 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:30:57,705 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:30:57,776 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:30:57,867 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:30:57,931 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:30:57,998 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:30:58,066 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:30:58,148 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:30:58,215 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:30:58,294 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:30:58,294 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:30:58,372 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:30:58,455 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:30:58,582 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:30:58,582 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:30:58,582 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:30:58,582 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:30:58,656 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:30:58,656 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:30:58,724 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:30:58,800 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:30:58,876 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:30:58,957 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:30:59,043 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:30:59,051 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:30:59,183 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:30:59,185 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:30:59,187 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:36:06,017 - INFO - Script started...
2024-10-22 23:36:06,037 - INFO - Found credentials in environment variables.
2024-10-22 23:36:06,186 - INFO - Fetched account ID: 118575936588
2024-10-22 23:36:06,235 - INFO - Listing IAM roles...
2024-10-22 23:36:06,492 - INFO - Total roles found after exclusion: 53
2024-10-22 23:36:06,523 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:36:07,229 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,229 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,230 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:07,328 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:36:07,328 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:36:07,329 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:36:07,409 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:36:07,485 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:36:07,485 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:36:07,654 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:36:07,654 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:36:07,654 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:36:07,654 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:36:07,654 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:36:07,742 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:36:07,742 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:36:07,918 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:36:09,101 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:36:09,193 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:36:09,194 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:36:09,296 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:36:09,381 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:36:09,698 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:36:09,971 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:36:09,971 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:36:10,049 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:36:10,049 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:36:10,049 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:36:10,051 - INFO - Roles provisioned by CloudFormation stacks: {'IsengardConfigRole', 'GitHubActionsRoleforIAMUser', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'SaltyTrustedService', 'XenaAuditorRole-DO-NOT-DELETE', 'sec-IAMPasswordLambdaRole', 'IibsAdminAccess-DO-NOT-DELETE', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'aws-controltower-AdministratorExecutionRole', 'importtestrole', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'AwsSecurityNacundaAudit', 'IsengardRole-DO-NOT-DELETE', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'IAMConfigRoleforAutomation', 'Admin', 'ShadowTrooperRole', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'CodeGuruProfilerForwardToAmazonProfiler', 'IsengardCloudTrailRole', 'test-role-breakglass-OIDC', 'EC2CapacityReservationService', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'TurtleRoleManagement', 'IsengardRoleForOptInComputeOptimizer', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'testcrossaccountrole112212', 'GatedGardenAudit', 'IMDSv2-automigrator', 'test-role-iamrole-breakglass-1234', 'InternalAuditInternal', 'OrthancRole', 'testcrossaccountrole', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'AdminTestnewApp', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'tel-sh-security-iam-role-for-lambda', 'GatedGardenInternalAudit', 'OrganizationAccountAccessRole', 'aws-controltower-ForwardSnsNotificationRole', 'CloudSeerTrustedServiceRole', 'AVMContainersUserRole', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'telus-security-audit-prowler-ecstaskrole', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'AWSVAPTAudit', 'CloudSecAuditRole', 'tenant-iam-acmcertificateprovisionrole', 'AccessAnalyzerTrustedService', 'IsengardAuditorRole-DO-NOT-DELETE', 'telus-security-audit-prowler-ecstaskrole1', 'awslogs.prod.kelex.molecule.toppatterns', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'GitHubActionsRole', 'aws-controltower-ReadOnlyExecutionRole', 'NawsApplicationMetrics-DO-NOT-DELETE', 'aws-controltower-ConfigRecorderRole', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'AwsSecurityAudit'}
2024-10-22 23:36:10,052 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:36:10,056 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:36:10,258 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:36:10,455 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:10,456 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:36:10,456 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:36:10,594 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:36:10,678 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:36:10,774 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:36:10,892 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:36:10,992 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:36:11,081 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:36:11,148 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:36:11,237 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:36:11,307 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:36:11,391 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:36:11,453 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:36:11,524 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:36:11,624 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:36:11,705 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:36:11,772 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:36:11,845 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:36:11,922 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:36:12,002 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:36:12,084 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:36:12,161 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:36:12,235 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:36:12,342 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:36:12,414 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:36:12,495 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:36:12,495 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:36:12,562 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:36:12,648 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:36:12,770 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:36:12,770 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:36:12,770 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:36:12,770 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:36:12,840 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:36:12,841 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:36:12,905 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:36:12,980 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:36:13,060 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:36:13,135 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:36:13,208 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:36:13,216 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:36:13,354 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:36:13,356 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:36:13,359 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:42:33,414 - INFO - Script started...
2024-10-22 23:42:33,433 - INFO - Found credentials in environment variables.
2024-10-22 23:42:33,597 - INFO - Fetched account ID: 118575936588
2024-10-22 23:42:33,652 - INFO - Listing IAM roles...
2024-10-22 23:42:33,883 - INFO - Total roles found after exclusion: 53
2024-10-22 23:42:33,919 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:42:34,608 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,608 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,608 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,608 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,608 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,608 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,608 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,609 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:34,713 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:42:34,713 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:42:34,713 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:42:34,802 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:42:34,909 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:42:34,909 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:42:35,091 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:42:35,091 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:42:35,091 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:42:35,091 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:42:35,091 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:42:35,202 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:42:35,202 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:42:35,377 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:42:36,595 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:42:36,673 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:42:36,673 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:42:36,736 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:42:36,868 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:42:37,255 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:42:37,477 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:42:37,477 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:42:37,546 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:42:37,546 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:42:37,546 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:42:37,548 - INFO - Roles provisioned by CloudFormation stacks: {'AWSVAPTAudit', 'tenant-iam-acmcertificateprovisionrole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'telus-security-audit-prowler-ecstaskrole1', 'CloudSecAuditRole', 'aws-controltower-ConfigRecorderRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'test-role-breakglass-OIDC', 'AVMContainersUserRole', 'IibsAdminAccess-DO-NOT-DELETE', 'Admin', 'IMDSv2-automigrator', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'TurtleRoleManagement', 'telus-security-audit-prowler-ecstaskrole', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'aws-controltower-AdministratorExecutionRole', 'test-role-iamrole-breakglass-1234', 'NawsApplicationMetrics-DO-NOT-DELETE', 'GatedGardenInternalAudit', 'IAMConfigRoleforAutomation', 'GatedGardenAudit', 'aws-controltower-ForwardSnsNotificationRole', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'InternalAuditInternal', 'OrthancRole', 'AwsSecurityNacundaAudit', 'tel-sh-security-iam-role-for-lambda', 'GitHubActionsRole', 'IsengardAuditorRole-DO-NOT-DELETE', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'aws-controltower-ReadOnlyExecutionRole', 'IsengardRoleForOptInComputeOptimizer', 'IsengardRole-DO-NOT-DELETE', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'AwsSecurityAudit', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'testcrossaccountrole112212', 'EC2CapacityReservationService', 'SaltyTrustedService', 'GitHubActionsRoleforIAMUser', 'awslogs.prod.kelex.molecule.toppatterns', 'ShadowTrooperRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'OrganizationAccountAccessRole', 'CloudSeerTrustedServiceRole', 'IsengardCloudTrailRole', 'AdminTestnewApp', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'importtestrole', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'AccessAnalyzerTrustedService', 'IsengardConfigRole', 'testcrossaccountrole', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'sec-IAMPasswordLambdaRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'XenaAuditorRole-DO-NOT-DELETE', 'CodeGuruProfilerForwardToAmazonProfiler'}
2024-10-22 23:42:37,548 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:42:37,552 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:42:37,737 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:42:38,101 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:38,101 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:42:38,101 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:42:38,205 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:42:38,289 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:42:38,375 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:42:38,523 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:42:38,618 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:42:38,719 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:42:38,787 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:42:38,854 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:42:38,927 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:42:38,997 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:42:39,102 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:42:39,177 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:42:39,250 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:42:39,330 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:42:39,405 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:42:39,484 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:42:39,553 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:42:39,619 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:42:39,692 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:42:39,763 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:42:39,831 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:42:39,936 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:42:40,003 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:42:40,077 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:42:40,077 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:42:40,158 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:42:40,266 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:42:40,362 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:42:40,362 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:42:40,362 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:42:40,363 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:42:40,447 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:42:40,447 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:42:40,514 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:42:40,588 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:42:40,655 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:42:40,717 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:42:40,784 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:42:40,792 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:42:40,930 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:42:40,932 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:42:40,934 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:43:43,954 - INFO - Script started...
2024-10-22 23:43:43,979 - INFO - Found credentials in environment variables.
2024-10-22 23:43:44,120 - INFO - Fetched account ID: 118575936588
2024-10-22 23:43:44,168 - INFO - Listing IAM roles...
2024-10-22 23:43:44,418 - INFO - Total roles found after exclusion: 53
2024-10-22 23:43:44,430 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:43:45,043 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,043 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,043 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,044 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:45,145 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:43:45,145 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:43:45,145 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:43:45,224 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:43:45,309 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:43:45,309 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:43:45,426 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:43:45,426 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:43:45,426 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:43:45,426 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:43:45,426 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:43:45,516 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:43:45,516 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:43:45,689 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:43:46,889 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:43:46,956 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:43:46,956 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:43:47,040 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:43:47,126 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:43:47,474 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:43:47,703 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:43:47,703 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:43:47,766 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:43:47,766 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:43:47,766 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:43:47,768 - INFO - Roles provisioned by CloudFormation stacks: {'IsengardRoleForOptInComputeOptimizer', 'OrganizationAccountAccessRole', 'importtestrole', 'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'IsengardRole-DO-NOT-DELETE', 'IAMConfigRoleforAutomation', 'OrthancRole', 'InternalAuditInternal', 'awslogs.prod.kelex.molecule.toppatterns', 'AWSVAPTAudit', 'GatedGardenInternalAudit', 'testcrossaccountrole', 'aws-controltower-ConfigRecorderRole', 'IsengardCloudTrailRole', 'testcrossaccountrole112212', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'SaltyTrustedService', 'IsengardConfigRole', 'AVMContainersUserRole', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'AdminTestnewApp', 'tel-sh-security-iam-role-for-lambda', 'test-role-breakglass-OIDC', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'Admin', 'XenaAuditorRole-DO-NOT-DELETE', 'TurtleRoleManagement', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'telus-security-audit-prowler-ecstaskrole', 'IsengardAuditorRole-DO-NOT-DELETE', 'IMDSv2-automigrator', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'IibsAdminAccess-DO-NOT-DELETE', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'AwsSecurityAudit', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'GitHubActionsRoleforIAMUser', 'ShadowTrooperRole', 'aws-controltower-AdministratorExecutionRole', 'CloudSecAuditRole', 'GatedGardenAudit', 'aws-controltower-ReadOnlyExecutionRole', 'CodeGuruProfilerForwardToAmazonProfiler', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'tenant-iam-acmcertificateprovisionrole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'EC2CapacityReservationService', 'aws-controltower-ForwardSnsNotificationRole', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'AccessAnalyzerTrustedService', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'GitHubActionsRole', 'sec-IAMPasswordLambdaRole', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'CloudSeerTrustedServiceRole', 'AwsSecurityNacundaAudit', 'NawsApplicationMetrics-DO-NOT-DELETE', 'telus-security-audit-prowler-ecstaskrole1'}
2024-10-22 23:43:47,768 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:43:47,772 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:43:47,970 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:43:48,190 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:48,190 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:43:48,190 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:43:48,275 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:43:48,352 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:43:48,433 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:43:48,585 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:43:48,683 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:43:48,785 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:43:48,860 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:43:48,934 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:43:49,002 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:43:49,096 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:43:49,174 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:43:49,244 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:43:49,315 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:43:49,382 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:43:49,472 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:43:49,539 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:43:49,609 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:43:49,691 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:43:49,768 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:43:49,844 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:43:49,912 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:43:50,001 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:43:50,082 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:43:50,151 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:43:50,151 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:43:50,228 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:43:50,323 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:43:50,429 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:43:50,429 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:43:50,429 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:43:50,429 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:43:50,495 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:43:50,495 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:43:50,558 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:43:50,641 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:43:50,707 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:43:50,772 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:43:50,843 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:43:50,851 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:43:50,993 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:43:50,995 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:43:50,996 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:47:16,222 - INFO - Script started...
2024-10-22 23:47:16,240 - INFO - Found credentials in environment variables.
2024-10-22 23:47:16,388 - INFO - Fetched account ID: 118575936588
2024-10-22 23:47:16,441 - INFO - Listing IAM roles...
2024-10-22 23:47:16,672 - INFO - Total roles found after exclusion: 53
2024-10-22 23:47:16,697 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:47:17,286 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,286 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,287 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:17,381 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:47:17,381 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:47:17,381 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:47:17,456 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:47:17,549 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:47:17,549 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:47:17,673 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:47:17,673 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:47:17,673 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:47:17,673 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:47:17,673 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:47:17,778 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:47:17,779 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:47:17,962 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:47:19,165 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:47:19,249 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:47:19,249 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:47:19,322 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:47:19,414 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:47:19,669 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:47:19,905 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:47:19,905 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:47:19,989 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:47:19,989 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:47:19,989 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:47:19,992 - INFO - Roles provisioned by CloudFormation stacks: {'tenant-iam-acmcertificateprovisionrole', 'AVMContainersUserRole', 'telus-security-audit-prowler-ecstaskrole1', 'CloudSecAuditRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'IsengardRole-DO-NOT-DELETE', 'GitHubActionsRoleforIAMUser', 'aws-controltower-ForwardSnsNotificationRole', 'OrganizationAccountAccessRole', 'TurtleRoleManagement', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'SaltyTrustedService', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'awslogs.prod.kelex.molecule.toppatterns', 'CodeGuruProfilerForwardToAmazonProfiler', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'test-role-breakglass-OIDC', 'sec-IAMPasswordLambdaRole', 'aws-controltower-ConfigRecorderRole', 'AccessAnalyzerTrustedService', 'tel-sh-security-iam-role-for-lambda', 'CloudSeerTrustedServiceRole', 'IsengardCloudTrailRole', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'IsengardAuditorRole-DO-NOT-DELETE', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'IMDSv2-automigrator', 'AwsSecurityAudit', 'EC2CapacityReservationService', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'testcrossaccountrole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'testcrossaccountrole112212', 'GitHubActionsRole', 'telus-security-audit-prowler-ecstaskrole', 'InternalAuditInternal', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'IsengardConfigRole', 'GatedGardenAudit', 'OrthancRole', 'aws-controltower-ReadOnlyExecutionRole', 'AdminTestnewApp', 'Admin', 'NawsApplicationMetrics-DO-NOT-DELETE', 'AwsSecurityNacundaAudit', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'importtestrole', 'GatedGardenInternalAudit', 'aws-controltower-AdministratorExecutionRole', 'IsengardRoleForOptInComputeOptimizer', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'AWSVAPTAudit', 'IibsAdminAccess-DO-NOT-DELETE', 'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'ShadowTrooperRole', 'XenaAuditorRole-DO-NOT-DELETE'}
2024-10-22 23:47:19,992 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:47:19,996 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:47:20,196 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:47:20,399 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:20,399 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:47:20,399 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:47:20,487 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:47:20,563 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:47:20,635 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:47:20,839 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:47:20,934 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:47:21,027 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:47:21,092 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:47:21,161 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:47:21,221 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:47:21,294 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:47:21,366 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:47:21,450 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:47:21,514 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:47:21,579 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:47:21,650 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:47:21,731 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:47:21,800 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:47:21,888 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:47:21,955 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:47:22,023 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:47:22,087 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:47:22,176 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:47:22,245 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:47:22,323 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:47:22,323 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:47:22,409 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:47:22,484 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:47:22,587 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:47:22,587 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:47:22,587 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:47:22,587 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:47:22,651 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:47:22,652 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:47:22,717 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:47:22,787 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:47:22,864 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:47:22,930 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:47:23,011 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:47:23,019 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:47:23,159 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:47:23,161 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:47:23,184 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:50:40,872 - INFO - Script started...
2024-10-22 23:50:40,895 - INFO - Found credentials in environment variables.
2024-10-22 23:50:41,045 - INFO - Fetched account ID: 118575936588
2024-10-22 23:50:41,112 - INFO - Listing IAM roles...
2024-10-22 23:50:41,367 - INFO - Total roles found after exclusion: 53
2024-10-22 23:50:41,396 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:50:41,916 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,917 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,918 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,918 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,918 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,918 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,918 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:41,918 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:42,012 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:50:42,012 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:50:42,012 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:50:42,119 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:50:42,199 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:50:42,199 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:50:42,390 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:50:42,390 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:50:42,390 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:50:42,390 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:50:42,390 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:50:42,487 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:50:42,487 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:50:42,682 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:50:43,893 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:50:43,968 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:50:43,968 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:50:44,039 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:50:44,122 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:50:44,371 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:50:44,598 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:50:44,598 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:50:44,670 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:50:44,670 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:50:44,670 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:50:44,673 - INFO - Roles provisioned by CloudFormation stacks: {'telus-security-audit-prowler-ecstaskrole', 'Admin', 'ShadowTrooperRole', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'TurtleRoleManagement', 'IibsAdminAccess-DO-NOT-DELETE', 'InternalAuditInternal', 'AVMContainersUserRole', 'CloudSeerTrustedServiceRole', 'awslogs.prod.kelex.molecule.toppatterns', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'aws-controltower-ReadOnlyExecutionRole', 'aws-controltower-ConfigRecorderRole', 'importtestrole', 'GitHubActionsRole', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'telus-security-audit-prowler-ecstaskrole1', 'sec-IAMPasswordLambdaRole', 'test-role-iamrole-breakglass-1234', 'AdminTestnewApp', 'IsengardRoleForOptInComputeOptimizer', 'CodeGuruProfilerForwardToAmazonProfiler', 'EC2CapacityReservationService', 'testcrossaccountrole112212', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'SaltyTrustedService', 'GitHubActionsRoleforIAMUser', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'AccessAnalyzerTrustedService', 'IsengardRole-DO-NOT-DELETE', 'testcrossaccountrole', 'IsengardAuditorRole-DO-NOT-DELETE', 'IMDSv2-automigrator', 'aws-controltower-ForwardSnsNotificationRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'OrganizationAccountAccessRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'test-role-breakglass-OIDC', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'GatedGardenInternalAudit', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'IsengardConfigRole', 'GatedGardenAudit', 'aws-controltower-AdministratorExecutionRole', 'NawsApplicationMetrics-DO-NOT-DELETE', 'OrthancRole', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'AwsSecurityNacundaAudit', 'IsengardCloudTrailRole', 'AwsSecurityAudit', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'CloudSecAuditRole', 'tel-sh-security-iam-role-for-lambda', 'AWSVAPTAudit', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'XenaAuditorRole-DO-NOT-DELETE', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'IAMConfigRoleforAutomation', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'tenant-iam-acmcertificateprovisionrole'}
2024-10-22 23:50:44,673 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:50:44,677 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:50:44,898 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:50:45,095 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:45,095 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:50:45,095 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:50:45,206 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:50:45,286 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:50:45,393 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:50:45,556 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:50:45,680 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:50:45,784 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:50:45,851 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:50:45,928 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:50:46,007 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:50:46,086 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:50:46,161 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:50:46,232 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:50:46,306 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:50:46,376 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:50:46,470 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:50:46,561 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:50:46,641 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:50:46,727 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:50:46,800 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:50:46,885 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:50:46,954 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:50:47,062 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:50:47,141 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:50:47,278 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:50:47,278 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:50:47,363 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:50:47,454 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:50:47,550 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:50:47,550 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:50:47,550 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:50:47,550 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:50:47,621 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:50:47,621 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:50:47,698 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:50:47,788 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:50:47,859 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:50:47,964 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:50:48,037 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:50:48,045 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:50:48,173 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:50:48,175 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:50:48,177 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:52:20,800 - INFO - Script started...
2024-10-22 23:52:20,818 - INFO - Found credentials in environment variables.
2024-10-22 23:52:20,963 - INFO - Fetched account ID: 118575936588
2024-10-22 23:52:21,016 - INFO - Listing IAM roles...
2024-10-22 23:52:21,267 - INFO - Total roles found after exclusion: 53
2024-10-22 23:52:21,300 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:52:21,960 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,960 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:21,961 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:22,071 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:52:22,071 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:52:22,071 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:52:22,161 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:52:22,251 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:52:22,252 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:52:22,372 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:52:22,372 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:52:22,372 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:52:22,373 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:52:22,373 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:52:22,462 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:52:22,462 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:52:22,617 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:52:23,871 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:52:23,949 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:52:23,949 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:52:24,023 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:52:24,107 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:52:24,405 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:52:24,652 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:52:24,652 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:52:24,728 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:52:24,728 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:52:24,729 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:52:24,731 - INFO - Roles provisioned by CloudFormation stacks: {'test-role-iamrole-breakglass-1234', 'IibsAdminAccess-DO-NOT-DELETE', 'Admin', 'IsengardAuditorRole-DO-NOT-DELETE', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'XenaAuditorRole-DO-NOT-DELETE', 'testcrossaccountrole112212', 'GatedGardenInternalAudit', 'EC2CapacityReservationService', 'CloudSeerTrustedServiceRole', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'ShadowTrooperRole', 'aws-controltower-AdministratorExecutionRole', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'telus-security-audit-prowler-ecstaskrole1', 'AwsSecurityNacundaAudit', 'test-role-breakglass-OIDC', 'OrganizationAccountAccessRole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'aws-controltower-ConfigRecorderRole', 'IsengardConfigRole', 'InternalAuditInternal', 'SaltyTrustedService', 'aws-controltower-ForwardSnsNotificationRole', 'aws-controltower-ReadOnlyExecutionRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'NawsApplicationMetrics-DO-NOT-DELETE', 'GatedGardenAudit', 'testcrossaccountrole', 'GitHubActionsRole', 'AccessAnalyzerTrustedService', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'IMDSv2-automigrator', 'telus-security-audit-prowler-ecstaskrole', 'IsengardCloudTrailRole', 'IsengardRole-DO-NOT-DELETE', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'OrthancRole', 'awslogs.prod.kelex.molecule.toppatterns', 'tel-sh-security-iam-role-for-lambda', 'CloudSecAuditRole', 'GitHubActionsRoleforIAMUser', 'sec-IAMPasswordLambdaRole', 'IAMConfigRoleforAutomation', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'TurtleRoleManagement', 'AdminTestnewApp', 'tenant-iam-acmcertificateprovisionrole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'IsengardRoleForOptInComputeOptimizer', 'AVMContainersUserRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'CodeGuruProfilerForwardToAmazonProfiler', 'AWSVAPTAudit', 'AwsSecurityAudit', 'importtestrole', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1'}
2024-10-22 23:52:24,731 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:52:24,735 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:52:24,934 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:52:25,129 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:25,129 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:52:25,129 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:52:25,214 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:52:25,291 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:52:25,378 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:52:25,501 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:52:25,613 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:52:25,708 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:52:25,780 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:52:25,844 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:52:25,958 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:52:26,029 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:52:26,106 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:52:26,182 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:52:26,249 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:52:26,321 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:52:26,389 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:52:26,516 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:52:26,598 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:52:26,672 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:52:26,758 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:52:26,860 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:52:26,925 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:52:27,032 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:52:27,107 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:52:27,180 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:52:27,180 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:52:27,255 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:52:27,361 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:52:27,462 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:52:27,463 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:52:27,463 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:52:27,463 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:52:27,541 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:52:27,541 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:52:27,605 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:52:27,686 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:52:27,765 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:52:27,830 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:52:27,893 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:52:27,901 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:52:28,036 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:52:28,038 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:52:28,041 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-22 23:59:08,466 - INFO - Script started...
2024-10-22 23:59:08,485 - INFO - Found credentials in environment variables.
2024-10-22 23:59:08,626 - INFO - Fetched account ID: 118575936588
2024-10-22 23:59:08,671 - INFO - Listing IAM roles...
2024-10-22 23:59:08,915 - INFO - Total roles found after exclusion: 53
2024-10-22 23:59:08,944 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-22 23:59:09,623 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,623 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,624 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:09,731 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:59:09,731 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:59:09,731 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-22 23:59:09,808 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-22 23:59:09,886 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:59:09,886 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-22 23:59:10,048 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:59:10,048 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:59:10,048 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:59:10,048 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:59:10,048 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-22 23:59:10,141 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:59:10,141 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-22 23:59:10,290 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-22 23:59:11,458 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-22 23:59:11,534 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:59:11,534 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:59:11,608 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-22 23:59:11,703 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-22 23:59:12,065 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-22 23:59:12,303 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:59:12,303 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-22 23:59:12,370 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:59:12,370 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-22 23:59:12,370 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-22 23:59:12,372 - INFO - Roles provisioned by CloudFormation stacks: {'tenant-iam-acmcertificateprovisionrole', 'Admin', 'test-role-breakglass-OIDC', 'EC2CapacityReservationService', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'testcrossaccountrole', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'sec-IAMPasswordLambdaRole', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'XenaAuditorRole-DO-NOT-DELETE', 'CloudSeerTrustedServiceRole', 'aws-controltower-AdministratorExecutionRole', 'AccessAnalyzerTrustedService', 'AVMContainersUserRole', 'AwsSecurityAudit', 'TurtleRoleManagement', 'aws-controltower-ConfigRecorderRole', 'SaltyTrustedService', 'tel-sh-security-iam-role-for-lambda', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'IsengardCloudTrailRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'GatedGardenAudit', 'IibsAdminAccess-DO-NOT-DELETE', 'testcrossaccountrole112212', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'AdminTestnewApp', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'AWSVAPTAudit', 'GatedGardenInternalAudit', 'CloudSecAuditRole', 'CodeGuruProfilerForwardToAmazonProfiler', 'awslogs.prod.kelex.molecule.toppatterns', 'NawsApplicationMetrics-DO-NOT-DELETE', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'importtestrole', 'InternalAuditInternal', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'aws-controltower-ForwardSnsNotificationRole', 'OrthancRole', 'IsengardConfigRole', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'test-role-iamrole-breakglass-1234', 'telus-security-audit-prowler-ecstaskrole', 'GitHubActionsRole', 'AwsSecurityNacundaAudit', 'telus-security-audit-prowler-ecstaskrole1', 'IAMConfigRoleforAutomation', 'IsengardRoleForOptInComputeOptimizer', 'ShadowTrooperRole', 'IMDSv2-automigrator', 'GitHubActionsRoleforIAMUser', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'IsengardRole-DO-NOT-DELETE', 'IsengardAuditorRole-DO-NOT-DELETE', 'OrganizationAccountAccessRole', 'aws-controltower-ReadOnlyExecutionRole'}
2024-10-22 23:59:12,373 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-22 23:59:12,376 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-22 23:59:12,591 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-22 23:59:12,815 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:12,815 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-22 23:59:12,815 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-22 23:59:12,909 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-22 23:59:13,008 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-22 23:59:13,094 - INFO - Checking resources for stack: CDKToolkit
2024-10-22 23:59:13,230 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-22 23:59:13,345 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-22 23:59:13,450 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-22 23:59:13,516 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-22 23:59:13,583 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-22 23:59:13,645 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-22 23:59:13,719 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-22 23:59:13,782 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-22 23:59:13,878 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-22 23:59:13,947 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-22 23:59:14,013 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-22 23:59:14,093 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-22 23:59:14,169 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-22 23:59:14,256 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-22 23:59:14,336 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-22 23:59:14,422 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-22 23:59:14,495 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-22 23:59:14,565 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-22 23:59:14,658 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-22 23:59:14,734 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-22 23:59:14,808 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-22 23:59:14,808 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-22 23:59:14,889 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-22 23:59:14,977 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-22 23:59:15,087 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:59:15,087 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:59:15,087 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-22 23:59:15,087 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-22 23:59:15,152 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-22 23:59:15,152 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-22 23:59:15,217 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-22 23:59:15,303 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-22 23:59:15,387 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-22 23:59:15,462 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-22 23:59:15,532 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-22 23:59:15,540 - INFO - Listing IAM customer-managed policies...
2024-10-22 23:59:15,681 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-22 23:59:15,683 - INFO - Creating YAML content for IAM policies and roles...
2024-10-22 23:59:15,686 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:01:22,889 - INFO - Script started...
2024-10-23 00:01:22,907 - INFO - Found credentials in environment variables.
2024-10-23 00:01:23,054 - INFO - Fetched account ID: 118575936588
2024-10-23 00:01:23,100 - INFO - Listing IAM roles...
2024-10-23 00:01:23,323 - INFO - Total roles found after exclusion: 53
2024-10-23 00:01:23,350 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:01:23,905 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,905 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,906 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:23,990 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:01:23,990 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:01:23,990 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:01:24,071 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:01:24,163 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:01:24,163 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:01:24,316 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:01:24,316 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:01:24,316 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:01:24,316 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:01:24,316 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:01:24,399 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:01:24,399 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:01:24,550 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:01:25,724 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:01:25,793 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:01:25,793 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:01:25,863 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:01:25,960 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:01:26,228 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:01:26,463 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:01:26,464 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:01:26,551 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:01:26,551 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:01:26,551 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-23 00:01:26,554 - INFO - Roles provisioned by CloudFormation stacks: {'AwsSecurityAudit', 'tenant-iam-acmcertificateprovisionrole', 'telus-security-audit-prowler-ecstaskrole1', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'AccessAnalyzerTrustedService', 'AdminTestnewApp', 'GatedGardenAudit', 'TurtleRoleManagement', 'AwsSecurityNacundaAudit', 'EC2CapacityReservationService', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'aws-controltower-ReadOnlyExecutionRole', 'OrthancRole', 'IibsAdminAccess-DO-NOT-DELETE', 'InternalAuditInternal', 'IsengardConfigRole', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'CloudSeerTrustedServiceRole', 'IAMConfigRoleforAutomation', 'testcrossaccountrole112212', 'IsengardRoleForOptInComputeOptimizer', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'OrganizationAccountAccessRole', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'CloudSecAuditRole', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'GitHubActionsRoleforIAMUser', 'XenaAuditorRole-DO-NOT-DELETE', 'SaltyTrustedService', 'awslogs.prod.kelex.molecule.toppatterns', 'IsengardAuditorRole-DO-NOT-DELETE', 'test-role-breakglass-OIDC', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'aws-controltower-AdministratorExecutionRole', 'tel-sh-security-iam-role-for-lambda', 'IsengardRole-DO-NOT-DELETE', 'ShadowTrooperRole', 'GitHubActionsRole', 'IMDSv2-automigrator', 'telus-security-audit-prowler-ecstaskrole', 'NawsApplicationMetrics-DO-NOT-DELETE', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'sec-IAMPasswordLambdaRole', 'aws-controltower-ConfigRecorderRole', 'aws-controltower-ForwardSnsNotificationRole', 'AVMContainersUserRole', 'IsengardCloudTrailRole', 'importtestrole', 'AWSVAPTAudit', 'Admin', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'GatedGardenInternalAudit', 'CodeGuruProfilerForwardToAmazonProfiler', 'testcrossaccountrole'}
2024-10-23 00:01:26,554 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-23 00:01:26,558 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:01:26,747 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-23 00:01:27,079 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:27,079 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:01:27,079 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:01:27,152 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:01:27,219 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:01:27,281 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:01:27,418 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:01:27,492 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:01:27,574 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:01:27,645 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:01:27,698 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:01:27,749 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:01:27,817 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:01:27,871 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:01:27,930 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:01:27,985 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:01:28,047 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:01:28,120 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:01:28,178 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:01:28,236 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:01:28,334 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:01:28,400 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:01:28,463 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:01:28,517 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:01:28,631 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:01:28,694 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:01:28,775 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:01:28,775 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:01:28,856 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:01:28,926 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:01:29,015 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:01:29,015 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:01:29,015 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:01:29,015 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:01:29,130 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:01:29,130 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:01:29,186 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:01:29,264 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:01:29,322 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:01:29,386 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:01:29,457 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-23 00:01:29,465 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:01:29,605 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:01:29,608 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:01:29,609 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:02:45,864 - INFO - Script started...
2024-10-23 00:02:45,881 - INFO - Found credentials in environment variables.
2024-10-23 00:02:46,028 - INFO - Fetched account ID: 118575936588
2024-10-23 00:02:46,081 - INFO - Listing IAM roles...
2024-10-23 00:02:46,353 - INFO - Total roles found after exclusion: 53
2024-10-23 00:02:46,387 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:02:46,978 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,978 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:46,979 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:47,058 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:02:47,058 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:02:47,058 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:02:47,131 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:02:47,203 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:02:47,204 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:02:47,330 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:02:47,330 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:02:47,330 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:02:47,330 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:02:47,330 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:02:47,415 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:02:47,415 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:02:47,564 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:02:48,789 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:02:48,869 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:02:48,869 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:02:48,939 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:02:49,037 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:02:49,338 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:02:49,594 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:02:49,594 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:02:49,675 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:02:49,675 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:02:49,675 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-23 00:02:49,677 - INFO - Roles provisioned by CloudFormation stacks: {'InternalAuditInternal', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'GitHubActionsRole', 'OrthancRole', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'GatedGardenAudit', 'ShadowTrooperRole', 'AdminTestnewApp', 'testcrossaccountrole112212', 'IsengardConfigRole', 'AwsSecurityNacundaAudit', 'EC2CapacityReservationService', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'XenaAuditorRole-DO-NOT-DELETE', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'IsengardAuditorRole-DO-NOT-DELETE', 'tel-sh-security-iam-role-for-lambda', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'aws-controltower-ForwardSnsNotificationRole', 'GitHubActionsRoleforIAMUser', 'aws-controltower-AdministratorExecutionRole', 'telus-security-audit-prowler-ecstaskrole', 'AVMContainersUserRole', 'aws-controltower-ReadOnlyExecutionRole', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'CodeGuruProfilerForwardToAmazonProfiler', 'AwsSecurityAudit', 'GatedGardenInternalAudit', 'IsengardRoleForOptInComputeOptimizer', 'AccessAnalyzerTrustedService', 'IibsAdminAccess-DO-NOT-DELETE', 'test-role-breakglass-OIDC', 'testcrossaccountrole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'OrganizationAccountAccessRole', 'AWSVAPTAudit', 'importtestrole', 'TurtleRoleManagement', 'IsengardCloudTrailRole', 'Admin', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'CloudSecAuditRole', 'awslogs.prod.kelex.molecule.toppatterns', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'NawsApplicationMetrics-DO-NOT-DELETE', 'sec-IAMPasswordLambdaRole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'tenant-iam-acmcertificateprovisionrole', 'aws-controltower-ConfigRecorderRole', 'test-role-iamrole-breakglass-1234', 'IsengardRole-DO-NOT-DELETE', 'CloudSeerTrustedServiceRole', 'telus-security-audit-prowler-ecstaskrole1', 'SaltyTrustedService', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'IMDSv2-automigrator'}
2024-10-23 00:02:49,677 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-23 00:02:49,681 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:02:49,884 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-23 00:02:50,088 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:50,088 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:02:50,088 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:02:50,173 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:02:50,267 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:02:50,357 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:02:50,475 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:02:50,566 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:02:50,667 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:02:50,734 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:02:50,809 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:02:50,884 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:02:50,986 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:02:51,076 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:02:51,151 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:02:51,224 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:02:51,304 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:02:51,386 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:02:51,468 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:02:51,542 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:02:51,618 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:02:51,695 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:02:51,763 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:02:51,840 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:02:51,927 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:02:52,002 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:02:52,075 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:02:52,075 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:02:52,145 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:02:52,229 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:02:52,333 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:02:52,333 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:02:52,333 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:02:52,333 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:02:52,402 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:02:52,402 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:02:52,467 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:02:52,545 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:02:52,634 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:02:52,711 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:02:52,794 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-23 00:02:52,802 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:02:52,933 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:02:52,935 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:02:52,938 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:07:16,069 - INFO - Script started...
2024-10-23 00:07:16,088 - INFO - Found credentials in environment variables.
2024-10-23 00:07:16,239 - INFO - Fetched account ID: 118575936588
2024-10-23 00:07:16,287 - INFO - Listing IAM roles...
2024-10-23 00:07:16,519 - INFO - Total roles found after exclusion: 53
2024-10-23 00:07:16,548 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:07:17,281 - INFO - Role 'XenaAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,281 - INFO - Role 'telus-sh-security-iam-publicResourceLambdaExecutionRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,281 - INFO - Role 'GatedGardenAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,281 - INFO - Role 'AwsSecurityAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'AccessAnalyzerTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'telus-security-audit-prowler-ecstaskrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IibsAdminAccess-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'testcrossaccountrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'ResourceConfigurationCollector-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'Admin' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IsengardAuditorRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'CloudSecAuditRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'AVMContainersUserRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'SaltyTrustedService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IsengardConfigRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'importtestrole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'CodeGuruProfilerForwardToAmazonProfiler' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'AWSVAPTAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'testcrossaccountrole112212' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'NawsApplicationMetrics-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'AwsSecurityNacundaAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'OrthancRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'CloudSeerTrustedServiceRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'TurtleRoleManagement' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IsengardRoleForDependencyAssuranceIamAnalyzer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'GatedGardenInternalAudit' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'InternalAuditInternal' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'telus-security-audit-prowler-ecstaskrole1' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IsengardCloudTrailRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'awslogs.prod.kelex.molecule.toppatterns' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IMDSv2-automigrator' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IsengardRoleForOptInComputeOptimizer' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'ShadowTrooperRole' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'EC2CapacityReservationService' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,282 - INFO - Role 'IsengardRole-DO-NOT-DELETE' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:17,371 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:07:17,371 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:07:17,371 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:07:17,453 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:07:17,532 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:07:17,532 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:07:17,651 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:07:17,652 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:07:17,652 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:07:17,652 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:07:17,652 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:07:17,766 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:07:17,766 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:07:17,956 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:07:19,195 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:07:19,272 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:07:19,273 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:07:19,362 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:07:19,453 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:07:19,793 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:07:20,024 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:07:20,024 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:07:20,100 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:07:20,100 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:07:20,100 - INFO - Total IAM roles in CloudFormation stacks found: 62
2024-10-23 00:07:20,102 - INFO - Roles provisioned by CloudFormation stacks: {'SaltyTrustedService', 'GitHubActionsRole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'DiscoveryAnalyzerTrustedService-DO-NOT-DELETE', 'AccessAnalyzerTrustedService', 'importtestrole', 'AWSVAPTAudit', 'CodeGuruProfilerForwardToAmazonProfiler', 'OrthancRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'aws-controltower-AdministratorExecutionRole', 'IsengardRoleForOptInComputeOptimizer', 'AwsSecurityNacundaAudit', 'telus-security-audit-prowler-ecstaskrole', 'NawsApplicationMetrics-DO-NOT-DELETE', 'aws-controltower-ForwardSnsNotificationRole', 'OrganizationAccountAccessRole', 'IMDSv2-automigrator', 'testcrossaccountrole', 'IsengardConfigRole', 'AwsSecurityAudit', 'CloudSecAuditRole', 'GitHubActionsRoleforIAMUser', 'aws-controltower-ConfigRecorderRole', 'awslogs.prod.kelex.molecule.toppatterns', 'test-role-iamrole-breakglass-1234', 'testcrossaccountrole112212', 'IsengardCloudTrailRole', 'PipelineStack-TelusShSecurityAcmProvisioningStackte-3GgllA1czIHr', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'IsengardAuditorRole-DO-NOT-DELETE', 'GatedGardenInternalAudit', 'IsengardRoleForDependencyAssuranceIamAnalyzer', 'telus-sh-security-iamrole-lambda_kms_quicksight_execution_role', 'AdminTestnewApp', 'tenant-iam-acmcertificateprovisionrole', 'IAMConfigRoleforAutomation', 'tel-sh-security-iam-role-for-lambda', 'AVMContainersUserRole', 'InternalAuditInternal', 'GatedGardenAudit', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'telus-sh-security-iam-publicResourceLambdaExecutionRole', 'sec-IAMPasswordLambdaRole', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'XenaAuditorRole-DO-NOT-DELETE', 'ResourceConfigurationCollector-DO-NOT-DELETE', 'Admin', 'CloudSeerTrustedServiceRole', 'telus-security-audit-prowler-ecstaskrole1', 'EC2CapacityReservationService', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'aws-controltower-ReadOnlyExecutionRole', 'test-role-breakglass-OIDC', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'TurtleRoleManagement', 'IsengardRole-DO-NOT-DELETE', 'ShadowTrooperRole', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'IibsAdminAccess-DO-NOT-DELETE', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1'}
2024-10-23 00:07:20,103 - INFO - Roles after filtering out CloudFormation provisioned roles: 0
2024-10-23 00:07:20,107 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:07:20,259 - INFO - Checking resources for stack: SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack
2024-10-23 00:07:20,446 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testlambdapolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:20,446 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/testautopolicy' is provisioned by CloudFormation stack 'SecurityConfigStack-118575936588-iam-role-policies-pipeline-stack'.
2024-10-23 00:07:20,446 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:07:20,535 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:07:20,637 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:07:20,729 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:07:20,867 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:07:20,967 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:07:21,054 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:07:21,153 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:07:21,230 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:07:21,317 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:07:21,392 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:07:21,465 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:07:21,537 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:07:21,616 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:07:21,693 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:07:21,773 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:07:21,855 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:07:21,924 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:07:22,001 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:07:22,071 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:07:22,142 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:07:22,203 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:07:22,281 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:07:22,338 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:07:22,416 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:07:22,417 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:07:22,506 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:07:22,582 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:07:22,788 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:07:22,788 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:07:22,788 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:07:22,788 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:07:22,852 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:07:22,852 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:07:22,923 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:07:23,002 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:07:23,095 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:07:23,184 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:07:23,258 - INFO - Total IAM managed policies in CloudFormation stacks found: 7
2024-10-23 00:07:23,266 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:07:23,402 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:07:23,404 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:07:23,406 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:14:02,701 - INFO - Script started...
2024-10-23 00:14:02,721 - INFO - Found credentials in environment variables.
2024-10-23 00:14:02,872 - INFO - Fetched account ID: 118575936588
2024-10-23 00:14:02,927 - INFO - Listing IAM roles...
2024-10-23 00:14:03,191 - INFO - Total roles found after exclusion: 53
2024-10-23 00:14:03,219 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:14:03,625 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:14:03,625 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:14:03,625 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:14:03,721 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:14:03,798 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:14:03,798 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:14:03,968 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:14:03,969 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:14:03,969 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:14:03,969 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:14:03,969 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:14:04,064 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:14:04,064 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:14:04,285 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:14:05,670 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:14:05,757 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:14:05,757 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:14:05,838 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:14:05,944 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:14:06,186 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:14:06,403 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:14:06,403 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:14:06,477 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:14:06,478 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:14:06,478 - INFO - Total IAM roles in CloudFormation stacks found: 24
2024-10-23 00:14:06,480 - INFO - Roles provisioned by CloudFormation stacks: {'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'aws-controltower-ForwardSnsNotificationRole', 'aws-controltower-ConfigRecorderRole', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'sec-IAMPasswordLambdaRole', 'test-role-breakglass-OIDC', 'tel-sh-security-iam-role-for-lambda', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'tenant-iam-acmcertificateprovisionrole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'aws-controltower-AdministratorExecutionRole', 'AdminTestnewApp', 'GitHubActionsRole', 'GitHubActionsRoleforIAMUser', 'aws-controltower-ReadOnlyExecutionRole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'OrganizationAccountAccessRole'}
2024-10-23 00:14:06,480 - INFO - Roles after filtering out CloudFormation provisioned roles: 38
2024-10-23 00:14:12,635 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:14:12,857 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:14:12,956 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:14:13,036 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:14:13,111 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:14:13,227 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:14:13,331 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:14:13,411 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:14:13,478 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:14:13,545 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:14:13,629 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:14:13,701 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:14:13,768 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:14:13,829 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:14:13,894 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:14:13,957 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:14:14,034 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:14:14,102 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:14:14,165 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:14:14,229 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:14:14,305 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:14:14,377 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:14:14,434 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:14:14,535 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:14:14,594 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:14:14,670 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:14:14,670 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:14:14,747 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:14:14,820 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:14:15,015 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:14:15,015 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:14:15,015 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:14:15,015 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:14:15,084 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:14:15,084 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:14:15,208 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:14:15,291 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:14:15,370 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:14:15,453 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:14:15,520 - INFO - Total IAM managed policies in CloudFormation stacks found: 5
2024-10-23 00:14:15,527 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:14:15,664 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:14:15,666 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:14:15,695 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:19:03,636 - INFO - Script started...
2024-10-23 00:19:03,654 - INFO - Found credentials in environment variables.
2024-10-23 00:19:03,813 - INFO - Fetched account ID: 118575936588
2024-10-23 00:19:03,879 - INFO - Listing IAM roles...
2024-10-23 00:19:04,144 - INFO - Total roles found after exclusion: 53
2024-10-23 00:19:04,174 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:19:04,668 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:19:04,669 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:19:04,669 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:19:04,780 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:19:04,879 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:19:04,879 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:19:05,002 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:19:05,002 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:19:05,002 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:19:05,002 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:19:05,002 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:19:05,110 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:19:05,110 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:19:05,338 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:19:06,717 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:19:06,940 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:19:06,941 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:19:07,002 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:19:07,091 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:19:07,400 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:19:07,624 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:19:07,624 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:19:07,702 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:19:07,702 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:19:07,702 - INFO - Total IAM roles in CloudFormation stacks found: 24
2024-10-23 00:19:07,705 - INFO - Roles provisioned by CloudFormation stacks: {'GitHubActionsRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'test-role-breakglass-OIDC', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'GitHubActionsRoleforIAMUser', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'AdminTestnewApp', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'OrganizationAccountAccessRole', 'tenant-iam-acmcertificateprovisionrole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'sec-IAMPasswordLambdaRole', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'aws-controltower-ConfigRecorderRole', 'aws-controltower-ForwardSnsNotificationRole', 'aws-controltower-ReadOnlyExecutionRole', 'aws-controltower-AdministratorExecutionRole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'tel-sh-security-iam-role-for-lambda'}
2024-10-23 00:19:07,705 - INFO - Roles after filtering out CloudFormation provisioned roles: 38
2024-10-23 00:19:13,671 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:19:13,898 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:19:13,990 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:19:14,071 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:19:14,165 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:19:14,324 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:19:14,431 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:19:14,531 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:19:14,632 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:19:14,729 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:19:14,821 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:19:14,917 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:19:14,997 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:19:15,084 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:19:15,189 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:19:15,269 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:19:15,347 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:19:15,440 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:19:15,517 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:19:15,594 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:19:15,665 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:19:15,744 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:19:15,814 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:19:15,909 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:19:16,001 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:19:16,089 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:19:16,089 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:19:16,155 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:19:16,244 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:19:16,359 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:19:16,359 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:19:16,359 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:19:16,359 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:19:16,423 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:19:16,423 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:19:16,490 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:19:16,564 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:19:16,635 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:19:16,704 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:19:16,791 - INFO - Total IAM managed policies in CloudFormation stacks found: 5
2024-10-23 00:19:16,799 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:19:16,946 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:19:16,948 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:19:16,976 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:20:17,309 - INFO - Script started...
2024-10-23 00:20:17,327 - INFO - Found credentials in environment variables.
2024-10-23 00:20:17,482 - INFO - Fetched account ID: 118575936588
2024-10-23 00:20:17,522 - INFO - Listing IAM roles...
2024-10-23 00:20:17,784 - INFO - Total roles found after exclusion: 53
2024-10-23 00:20:17,812 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:20:18,254 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:20:18,254 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:20:18,254 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:20:18,341 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:20:18,417 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:20:18,417 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:20:18,584 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:20:18,584 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:20:18,584 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:20:18,584 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:20:18,584 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:20:18,675 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:20:18,675 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:20:18,832 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:20:20,070 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:20:20,154 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:20:20,154 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:20:20,224 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:20:20,320 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:20:20,614 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:20:20,846 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:20:20,846 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:20:20,919 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:20:20,920 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:20:20,920 - INFO - Total IAM roles in CloudFormation stacks found: 24
2024-10-23 00:20:20,922 - INFO - Roles provisioned by CloudFormation stacks: {'test-role-breakglass-OIDC', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'aws-controltower-ReadOnlyExecutionRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'tenant-iam-acmcertificateprovisionrole', 'test-role-iamrole-breakglass-1234', 'aws-controltower-ForwardSnsNotificationRole', 'GitHubActionsRole', 'GitHubActionsRoleforIAMUser', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'sec-IAMPasswordLambdaRole', 'aws-controltower-ConfigRecorderRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'tel-sh-security-iam-role-for-lambda', 'aws-controltower-AdministratorExecutionRole', 'IAMConfigRoleforAutomation', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'OrganizationAccountAccessRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'AdminTestnewApp', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3'}
2024-10-23 00:20:20,922 - INFO - Roles after filtering out CloudFormation provisioned roles: 38
2024-10-23 00:20:27,039 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:20:27,249 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:20:27,356 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:20:27,435 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:20:27,524 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:20:27,654 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:20:27,742 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:20:27,837 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:20:27,904 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:20:27,985 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:20:28,061 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:20:28,130 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:20:28,212 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:20:28,287 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:20:28,361 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:20:28,441 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:20:28,518 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:20:28,590 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:20:28,666 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:20:28,724 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:20:28,790 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:20:28,854 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:20:28,936 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:20:29,018 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:20:29,116 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:20:29,211 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:20:29,211 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:20:29,275 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:20:29,356 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:20:29,464 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:20:29,465 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:20:29,465 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:20:29,465 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:20:29,529 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:20:29,529 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:20:29,591 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:20:29,688 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:20:29,759 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:20:29,861 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:20:29,929 - INFO - Total IAM managed policies in CloudFormation stacks found: 5
2024-10-23 00:20:29,936 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:20:30,070 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:20:30,072 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:20:30,097 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:31:11,173 - INFO - Script started...
2024-10-23 00:31:11,190 - INFO - Found credentials in environment variables.
2024-10-23 00:31:11,344 - INFO - Fetched account ID: 118575936588
2024-10-23 00:31:11,393 - INFO - Listing IAM roles...
2024-10-23 00:31:11,649 - INFO - Total roles found after exclusion: 53
2024-10-23 00:31:11,679 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:31:12,131 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:31:12,131 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:31:12,131 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:31:12,215 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:31:12,306 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:31:12,306 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:31:12,620 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:31:12,620 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:31:12,620 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:31:12,620 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:31:12,620 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:31:12,717 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:31:12,717 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:31:12,945 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:31:14,174 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:31:14,282 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:31:14,282 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:31:14,362 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:31:14,456 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:31:14,763 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:31:15,007 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:31:15,008 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:31:15,082 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:31:15,082 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:31:15,082 - INFO - Total IAM roles in CloudFormation stacks found: 24
2024-10-23 00:31:15,085 - INFO - Roles provisioned by CloudFormation stacks: {'test-role-breakglass-OIDC', 'OrganizationAccountAccessRole', 'aws-controltower-ReadOnlyExecutionRole', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'sec-IAMPasswordLambdaRole', 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'aws-controltower-AdministratorExecutionRole', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'GitHubActionsRole', 'tel-sh-security-iam-role-for-lambda', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'AdminTestnewApp', 'tenant-iam-acmcertificateprovisionrole', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'GitHubActionsRoleforIAMUser', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'IAMConfigRoleforAutomation', 'aws-controltower-ConfigRecorderRole', 'aws-controltower-ForwardSnsNotificationRole'}
2024-10-23 00:31:15,085 - INFO - Roles after filtering out CloudFormation provisioned roles: 38
2024-10-23 00:31:22,203 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:31:22,411 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:31:22,516 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:31:22,601 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:31:22,686 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:31:22,806 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:31:22,913 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:31:23,009 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:31:23,087 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:31:23,168 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:31:23,243 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:31:23,350 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:31:23,427 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:31:23,514 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:31:23,594 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:31:23,707 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:31:23,782 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:31:23,880 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:31:23,970 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:31:24,047 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:31:24,138 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:31:24,224 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:31:24,293 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:31:24,396 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:31:24,473 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:31:24,566 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:31:24,566 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:31:24,650 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:31:24,741 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:31:24,894 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:31:24,894 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:31:24,894 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:31:24,894 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:31:24,963 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:31:24,963 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:31:25,037 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:31:25,132 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:31:25,210 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:31:25,289 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:31:25,367 - INFO - Total IAM managed policies in CloudFormation stacks found: 5
2024-10-23 00:31:25,374 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:31:25,515 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:31:25,517 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:31:25,544 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
2024-10-23 00:33:27,152 - INFO - Script started...
2024-10-23 00:33:27,172 - INFO - Found credentials in environment variables.
2024-10-23 00:33:28,319 - INFO - Fetched account ID: 118575936588
2024-10-23 00:33:28,372 - INFO - Listing IAM roles...
2024-10-23 00:33:28,640 - INFO - Total roles found after exclusion: 53
2024-10-23 00:33:28,668 - INFO - Listing IAM roles from CloudFormation stacks...
2024-10-23 00:33:29,128 - INFO - Role 'AdminTestnewApp' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:33:29,128 - INFO - Role 'test-role-breakglass-OIDC' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:33:29,128 - INFO - Role 'test-role-iamrole-breakglass-1234' is provisioned by CloudFormation stack 'IamRoleOIDCConfigStack-118575936588'.
2024-10-23 00:33:29,228 - INFO - Role 'tenant-iam-acmcertificateprovisionrole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07'.
2024-10-23 00:33:29,312 - INFO - Role 'GitHubActionsRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:33:29,312 - INFO - Role 'GitHubActionsRoleforIAMUser' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84'.
2024-10-23 00:33:29,484 - INFO - Role 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:33:29,484 - INFO - Role 'cdk-hnb659fds-deploy-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:33:29,484 - INFO - Role 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:33:29,484 - INFO - Role 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:33:29,484 - INFO - Role 'cdk-hnb659fds-lookup-role-118575936588-us-east-1' is provisioned by CloudFormation stack 'CDKToolkit'.
2024-10-23 00:33:29,569 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:33:29,569 - INFO - Role 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad'.
2024-10-23 00:33:29,718 - INFO - Role 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35'.
2024-10-23 00:33:30,938 - INFO - Role 'TELUS-EventBridge-RoletoPublishto-CentralAccount' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4'.
2024-10-23 00:33:31,020 - INFO - Role 'IAMConfigRoleforAutomation' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:33:31,020 - INFO - Role 'tel-sh-security-iam-role-for-lambda' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:33:31,102 - INFO - Role 'OrganizationAccountAccessRole' is provisioned by CloudFormation stack 'StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07'.
2024-10-23 00:33:31,203 - INFO - Role 'sec-IAMPasswordLambdaRole' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab'.
2024-10-23 00:33:31,576 - INFO - Role 'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5'.
2024-10-23 00:33:31,819 - INFO - Role 'aws-controltower-ConfigRecorderRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:33:31,819 - INFO - Role 'aws-controltower-ForwardSnsNotificationRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c'.
2024-10-23 00:33:31,896 - INFO - Role 'aws-controltower-AdministratorExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:33:31,896 - INFO - Role 'aws-controltower-ReadOnlyExecutionRole' is provisioned by CloudFormation stack 'StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045'.
2024-10-23 00:33:31,896 - INFO - Total IAM roles in CloudFormation stacks found: 24
2024-10-23 00:33:31,898 - INFO - Roles provisioned by CloudFormation stacks: {'StackSet-CustomControlTower-create-TestLambdaRole-1S2KTK12TU9BI', 'aws-controltower-ConfigRecorderRole', 'TELUS-EventBridge-RoletoPublishto-CentralAccount', 'StackSet-AWSControlTowerGuardHook-ac0d1eff--LogRole-wews9EvGqW3j', 'tenant-iam-acmcertificateprovisionrole', 'cdk-hnb659fds-file-publishing-role-118575936588-us-east-1', 'AdminTestnewApp', 'tel-sh-security-iam-role-for-lambda', 'OrganizationAccountAccessRole', 'cdk-hnb659fds-image-publishing-role-118575936588-us-east-1', 'StackSet-CustomControlTow-EnableEBSEncryptionLambda-AKtDqgzIImK3', 'StackSet-AWSControlTowerGuardHook-ac0-ExecutionRole-Huuad2Bsv1FR', 'GitHubActionsRole', 'aws-controltower-AdministratorExecutionRole', 'GitHubActionsRoleforIAMUser', 'test-role-iamrole-breakglass-1234', 'cdk-hnb659fds-cfn-exec-role-118575936588-us-east-1', 'aws-controltower-ForwardSnsNotificationRole', 'cdk-hnb659fds-deploy-role-118575936588-us-east-1', 'IAMConfigRoleforAutomation', 'test-role-breakglass-OIDC', 'aws-controltower-ReadOnlyExecutionRole', 'sec-IAMPasswordLambdaRole', 'cdk-hnb659fds-lookup-role-118575936588-us-east-1'}
2024-10-23 00:33:31,898 - INFO - Roles after filtering out CloudFormation provisioned roles: 38
2024-10-23 00:33:38,228 - INFO - Listing IAM managed policies provisioned by CloudFormation stacks...
2024-10-23 00:33:38,425 - INFO - Checking resources for stack: IamRoleOIDCConfigStack-118575936588
2024-10-23 00:33:38,532 - INFO - Checking resources for stack: StackSet-CustomControlTower-tenantIamAcmRole-96d80579-8982-4ed5-bfd3-96b50afafb07
2024-10-23 00:33:38,617 - INFO - Checking resources for stack: StackSet-CustomControlTower-githubActionsRole-4d8cdf91-2bbd-4546-9ac3-3660316a7b84
2024-10-23 00:33:38,691 - INFO - Checking resources for stack: CDKToolkit
2024-10-23 00:33:38,827 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardHook-ac0d1eff-67e7-4126-96a1-42e48eab23ad
2024-10-23 00:33:38,927 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampermboundary-ssm-parameters-940d0ede-30e8-4cc6-9d42-8721aa84d4ac
2024-10-23 00:33:39,017 - INFO - Checking resources for stack: StackSet-CustomControlTower-encryption-ebsv2-8a1e256d-8da3-47f8-b62d-a13033c94d35
2024-10-23 00:33:39,081 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ROOT-ACCOUNT-MFA-ENABLED-87dba6ae-cd73-419b-83a5-ec70e5016632
2024-10-23 00:33:39,155 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-DETECT-CLOUDTRAIL-ENABLED-ON-MEMBER-ACCOUNTS-0bb2e4fa-5797-4836-a2d4-e88c4ce5ce1b
2024-10-23 00:33:39,241 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-WRITE-PROHIBITED-f27b5e66-f7c9-464f-a465-3b6913350367
2024-10-23 00:33:39,343 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-S3-BUCKET-PUBLIC-READ-PROHIBITED-0f4ff8f2-d150-471d-b4a6-72f41a3ef519
2024-10-23 00:33:39,415 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-STORAGE-ENCRYPTED-c7efd792-e236-495f-91a0-c00a6d9085ff
2024-10-23 00:33:39,488 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-SNAPSHOTS-PUBLIC-PROHIBITED-63e34878-ab7c-4fee-88f1-55224086b311
2024-10-23 00:33:39,569 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-SSH-1f3c96f4-e805-4013-950b-f8ad3690d6a2
2024-10-23 00:33:39,638 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RESTRICTED-COMMON-PORTS-a1aabf2c-676c-462a-a863-461a2d40ed3a
2024-10-23 00:33:39,711 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-ENCRYPTED-VOLUMES-e14ddad4-e874-4ff5-b32e-27242944acbf
2024-10-23 00:33:39,783 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-RDS-INSTANCE-PUBLIC-ACCESS-CHECK-99ff1737-55eb-4bc2-9266-a96d02a30b4f
2024-10-23 00:33:39,862 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EC2-VOLUME-INUSE-CHECK-a789b100-7680-4449-8ec5-3b1ce5ab1e45
2024-10-23 00:33:39,937 - INFO - Checking resources for stack: StackSet-AWSControlTowerGuardrailAWS-GR-EBS-OPTIMIZED-INSTANCE-ab0b8ee9-92ec-4c9d-872b-db8e65afe178
2024-10-23 00:33:40,011 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-LINKED-ROLE-cd988b28-3fa6-454a-96cd-099f38145d5d
2024-10-23 00:33:40,096 - INFO - Checking resources for stack: StackSet-CustomControlTower-access-analyzer-accountlevel-a83ef7ad-cd7e-4dfe-9d7f-eacebdadbb6c
2024-10-23 00:33:40,163 - INFO - Checking resources for stack: StackSet-CustomControlTower-ssmparams-e1b1db25-a32d-4b64-b506-cef8c4eea151
2024-10-23 00:33:40,260 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamusers-ca978f3c-379b-4ed7-a755-6a1d997372d4
2024-10-23 00:33:40,338 - INFO - Checking resources for stack: StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330
2024-10-23 00:33:40,427 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/iamroleconfig' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-iamroleconfig-KJ-73da44c5-cc93-4534-9cd2-45ec3f043330'.
2024-10-23 00:33:40,428 - INFO - Checking resources for stack: StackSet-RecreateOrganizationControlRole-Isengard-ea2d7c0f-4be2-45dc-a7d5-26b2130f8c07
2024-10-23 00:33:40,501 - INFO - Checking resources for stack: StackSet-CustomControlTower-iampathrole-4cdec570-9394-44bf-b420-ba227586a8ab
2024-10-23 00:33:40,608 - INFO - Checking resources for stack: StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef
2024-10-23 00:33:40,751 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Admin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:33:40,751 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-BillingAdmin-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:33:40,752 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/Environment-Developer-Teffff' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-IAMEnvOperator-KJ-445389cf-0bc8-4b8c-9c85-af8a540619ef'.
2024-10-23 00:33:40,752 - INFO - Checking resources for stack: StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2
2024-10-23 00:33:40,849 - INFO - Managed Policy 'arn:aws:iam::118575936588:policy/3-Tef-Environment-Admin' is provisioned by CloudFormation stack 'StackSet-CustomControlTower-test-Iam-Policy-CFNCode-KJ-624e311b-de2d-4b9b-aba0-2805959015e2'.
2024-10-23 00:33:40,849 - INFO - Checking resources for stack: StackSet-CustomControlTower-create-iam-role-13c4a43d-00df-46fb-9c3b-1895b0dcaeb5
2024-10-23 00:33:40,925 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CONFIG-de1511fe-36bf-4c3b-b0d3-8ee3334ff2b2
2024-10-23 00:33:41,012 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-CLOUDWATCH-6ce32fc7-6d50-410a-9b8d-c672d6de2dad
2024-10-23 00:33:41,093 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-SERVICE-ROLES-6f3a1212-16b3-4e3e-8d3b-bc7060fc612c
2024-10-23 00:33:41,167 - INFO - Checking resources for stack: StackSet-AWSControlTowerBP-BASELINE-ROLES-6059d558-cae0-4a87-b650-85cb7a577045
2024-10-23 00:33:41,240 - INFO - Total IAM managed policies in CloudFormation stacks found: 5
2024-10-23 00:33:41,247 - INFO - Listing IAM customer-managed policies...
2024-10-23 00:33:41,396 - INFO - Total customer-managed policies found after exclusion: 0
2024-10-23 00:33:41,398 - INFO - Creating YAML content for IAM policies and roles...
2024-10-23 00:33:41,426 - INFO - YAML file iamrole-policies-118575936588.yaml created successfully.
