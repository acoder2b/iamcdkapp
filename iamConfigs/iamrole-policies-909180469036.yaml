account_id:
- '909180469036'
region: us-east-1
stack_name: iam-role-policies-pipeline-stack
iam_policies:
-   policyName: test
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Deny
            Action:
            - cloudformation:DeleteStack
            - cloudformation:UpdateStack
            - cloudformation:UpdateStackSet
            - cloudformation:DeleteStackSet
            Resource:
            - arn:aws:cloudformation:*:*:stack/StackSet-CustomControlTower*/*
            - arn:aws:cloudformation:*:*:stackset-target/*
            - arn:aws:cloudformation:*:*:stackset/StackSet-CustomControlTower:*
            Condition:
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/AWSControlTowerExecution
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin*
        -   Sid: VisualEditor2
            Effect: Deny
            Action:
            - cloudformation:DeleteStack
            - cloudformation:UpdateStack
            - cloudformation:UpdateStackSet
            - cloudformation:DeleteStackSet
            Resource: '*'
            Condition:
                StringLike:
                    aws:ResourceTag/ManagedBy: Platform
                    aws:ResourceTag/AWS_Solutions: CustomControlTowerStackSet
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/AWSControlTowerExecution
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin*
        -   Sid: VisualEditor3
            Effect: Deny
            Action:
            - ec2:RevokeSecurityGroupIngress
            - ec2:Modify*
            - ec2:RevokeSecurityGroupEgress
            - ec2:Delete*
            - ec2:DisassociateVpcCidrBlock
            Resource: '*'
            Condition:
                StringLike:
                    aws:ResourceTag/ManagedBy: Platform
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin*
                    - arn:aws:iam::*:role/AWSControlTowerExecution
        -   Sid: VisualEditor4
            Effect: Deny
            Action:
            - events:DeleteRule
            - events:PutRule
            - events:DisableRule
            Resource:
            - arn:aws:events:*:*:rule/StackSet-CustomControlTower*
            - arn:aws:events:*:*:rule/*/StackSet-CustomControlTower*
            Condition:
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin
                    - arn:aws:iam::*:role/AWSControlTowerExecution
        -   Sid: VisualEditor5
            Effect: Deny
            Action:
            - events:DeleteRule
            - events:PutRule
            - events:UntagResource
            - events:DisableRule
            Resource: '*'
            Condition:
                StringLike:
                    aws:ResourceTag/ManagedBy: Platform
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/AWSControlTowerExecution
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin*
        -   Sid: VisualEditor6
            Effect: Deny
            Action:
            - iam:DetachRolePolicy
            - iam:DeleteRolePolicy
            - iam:PutRolePermissionsBoundary
            - iam:DeletePolicy
            - iam:DeleteRole
            - iam:UpdateRole
            - iam:DeleteUser
            - iam:PutRolePolicy
            - iam:DeleteRolePermissionsBoundary
            Resource:
            - arn:aws:iam::*:policy/Tef-*
            - arn:aws:iam::*:user/technical-user-kms*
            - arn:aws:iam::*:role/Tef-*
            Condition:
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin*
                    - arn:aws:iam::*:role/AWSControlTowerExecution
        -   Sid: VisualEditor7
            Effect: Deny
            Action:
            - iam:DetachRolePolicy
            - iam:DeleteRolePolicy
            - iam:PutRolePermissionsBoundary
            - iam:DeletePolicy
            - iam:DeleteRole
            - iam:UpdateRole
            - iam:DeleteUser
            - iam:PutRolePolicy
            - iam:DeleteRolePermissionsBoundary
            Resource: '*'
            Condition:
                StringLike:
                    aws:ResourceTag/ManagedBy: Platform
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin*
                    - arn:aws:iam::*:role/AWSControlTowerExecution
        -   Sid: VisualEditor8
            Effect: Deny
            Action:
            - ssm:PutParameter
            - ssm:DeleteParameter
            - ssm:DeleteParameters
            Resource: '*'
            Condition:
                StringLike:
                    aws:ResourceTag/ManagedBy: Platform
                ArnNotLike:
                    aws:PrincipalArn:
                    - arn:aws:iam::*:role/AWSControlTowerExecution
                    - arn:aws:iam::*:role/aws-reserved/sso.amazonaws.com/eu-central-1/AWSReservedSSO_Tef-Platform-Admin*
    path: /
-   policyName: Tef-Permission-Environment-Admin2
    deletionPolicy: RETAIN
    policyDocument:
        Statement:
        -   Action: ec2:CreateVpcEndpoint
            Condition:
                StringEqualsIfExists:
                    ec2:VpceServiceName:
                    - com.amazonaws.eu-central-1.appmesh-envoy-management
                    - com.amazonaws.eu-central-1.athena
                    - com.amazonaws.eu-central-1.autoscaling-plans
                    - com.amazonaws.eu-central-1.autoscaling
                    - com.amazonaws.eu-central-1.codebuild
                    - com.amazonaws.eu-central-1.codecommit
                    - com.amazonaws.eu-central-1.codepipeline
                    - com.amazonaws.eu-central-1.ebs
                    - com.amazonaws.eu-central-1.ecr.api
                    - com.amazonaws.eu-central-1.ecr.dkr
                    - com.amazonaws.eu-central-1.ecs-agent
                    - com.amazonaws.eu-central-1.ecs-telemetry
                    - com.amazonaws.eu-central-1.ecs
                    - com.amazonaws.eu-central-1.elasticfilesystem
                    - com.amazonaws.eu-central-1.elasticloadbalancing
                    - com.amazonaws.eu-central-1.events
                    - com.amazonaws.eu-central-1.execute-api
                    - com.amazonaws.eu-central-1.git-codecommit
                    - com.amazonaws.eu-central-1.glue
                    - com.amazonaws.eu-central-1.imagebuilder
                    - com.amazonaws.eu-central-1.logs
                    - com.amazonaws.eu-central-1.monitoring
                    - com.amazonaws.eu-central-1.rds
                    - com.amazonaws.eu-central-1.redshift-data
                    - com.amazonaws.eu-central-1.redshift
                    - com.amazonaws.eu-central-1.secretsmanager
                    - com.amazonaws.eu-central-1.sns
                    - com.amazonaws.eu-central-1.sqs
                    - com.amazonaws.eu-central-1.states
            Effect: Allow
            Resource: '*'
            Sid: EACreateVpcEndpoints
        -   Action:
            - ec2:ModifyVpcEndpoint
            - ec2:DescribeVpcEndpoints
            - ec2:DeleteVpcEndpoints
            Condition:
                StringEquals:
                    ec2:ResourceTag/tefde:sec:managed-by: environment-operator
            Effect: Allow
            Resource: '*'
            Sid: EADeleteDescribeModifyEndpoints
        Version: '2012-10-17'
    path: /
-   policyName: telcocafe
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - iam:*
            - s3:*
            Resource: '*'
        -   Sid: Statement1
            Effect: Allow
            Action:
            - s3:*
            Resource:
            - arn:aws:s3:::67383hdhakjd89642g4bsc
    path: /
-   policyName: AwsSecurityNacundaAuditPolicy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Effect: Allow
            Action:
            - guardduty:CreateDetector
            - guardduty:GetDetector
            - guardduty:ListDetectors
            - guardduty:UpdateDetector
            Resource: '*'
        -   Effect: Allow
            Action:
            - iam:CreateServiceLinkedRole
            Resource: arn:aws:iam::909180469036:role/aws-service-role/guardduty.amazonaws.com/AWSServiceRoleForAmazonGuardDuty
            Condition:
                StringLike:
                    iam:AWSServiceName: guardduty.amazonaws.com
        -   Effect: Allow
            Action:
            - events:PutRule
            Resource: '*'
        -   Effect: Allow
            Action:
            - events:DeleteRule
            - events:DescribeRule
            - events:DisableRule
            - events:EnableRule
            - events:ListTargetsByRule
            - events:PutTargets
            - events:RemoveTargets
            Resource: arn:aws:events:*:909180469036:rule/AwsSecurityNacundaAuditFindings-DO-NOT-DELETE
    path: /
-   policyName: Tef-Role-Policy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - iam:PutRolePermissionsBoundary
            - iam:PutUserPermissionsBoundary
            - iam:CreateRole
            - iam:CreateUser
            Resource: '*'
            Condition:
                StringEquals:
                    iam:PermissionsBoundary: arn:aws:iam::*:policy/Tef-Environment-Admin
        -   Sid: VisualEditor1
            Effect: Allow
            Action:
            - iam:DeleteAccessKey
            - iam:List*
            - rds:*
            - firehose:*
            - redshift:*
            - iam:GenerateServiceLastAccessedDetails
            - backup:*
            - iam:PutRolePolicy
            - guardduty:GetDetector
            - dms:*
            - iam:AddRoleToInstanceProfile
            - codebuild:*
            - iam:SimulateCustomPolicy
            - kms:Encrypt
            - guardduty:GetMemberDetectors
            - quicksight:*
            - iam:UploadSSHPublicKey
            - iam:DetachGroupPolicy
            - guardduty:GetFilter
            - guardduty:ListTagsForResource
            - sns:*
            - states:*
            - apigateway:*
            - guardduty:GetMasterAccount
            - iam:DeleteRole
            - iam:UpdateRoleDescription
            - iam:TagPolicy
            - guardduty:GetMalwareScanSettings
            - codecommit:*
            - cloudwatch:*
            - ecs:*
            - ec2:*
            - guardduty:ListFilters
            - guardduty:GetInvitationsCount
            - iam:CreateInstanceProfile
            - iam:GenerateCredentialReport
            - guardduty:GetFindings
            - kms:GenerateRandom
            - iam:UntagRole
            - kms:PutKeyPolicy
            - cloudtrail:*
            - iam:PutRolePermissionsBoundary
            - iam:TagRole
            - kms:Verify
            - kms:ListResourceTags
            - athena:*
            - iam:PassRole
            - iam:DeleteRolePolicy
            - kms:CreateKey
            - guardduty:DescribePublishingDestination
            - iam:DeleteAccountAlias
            - kms:CreateGrant
            - kms:EnableKeyRotation
            - elasticfilesystem:*
            - iam:get*
            - iam:DeleteInstanceProfile
            - guardduty:ListDetectors
            - s3:*
            - kms:GetKeyPolicy
            - iam:PutUserPermissionsBoundary
            - guardduty:GetIPSet
            - iam:DeleteUser
            - iam:CreatePolicy
            - iam:CreateServiceLinkedRole
            - guardduty:GetUsageStatistics
            - ssm:*
            - iam:PutUserPolicy
            - kms:CreateAlias
            - iam:TagServerCertificate
            - guardduty:ListOrganizationAdminAccounts
            - ecr:*
            - iam:UntagPolicy
            - iam:UpdateRole
            - iam:UntagOpenIDConnectProvider
            - guardduty:GetFindingsStatistics
            - iam:UntagInstanceProfile
            - iam:TagOpenIDConnectProvider
            - iam:TagInstanceProfile
            - kms:Decrypt
            - guardduty:ListThreatIntelSets
            - guardduty:GetThreatIntelSet
            - logs:*
            - iam:RemoveRoleFromInstanceProfile
            - iam:AttachRolePolicy
            - iam:TagSAMLProvider
            - autoscaling:*
            - guardduty:DescribeMalwareScans
            - guardduty:ListInvitations
            - iam:DetachRolePolicy
            - iam:SimulatePrincipalPolicy
            - config:*
            - kinesis:*
            - guardduty:ListPublishingDestinations
            - iam:DetachUserPolicy
            - events:*
            - directconnect:*
            - guardduty:ListMembers
            - guardduty:ListIPSets
            - iam:UpdateUser
            - iam:AttachUserPolicy
            - cloudformation:*
            - iam:UpdateAccessKey
            - guardduty:GetMembers
            - s3-object-lambda:*
            - iam:DeleteServiceLinkedRole
            - eks:*
            - datasync:*
            - iam:DeletePolicy
            - guardduty:ListFindings
            - iam:CreateAccessKey
            - kms:TagResource
            - iam:AddUserToGroup
            - iam:RemoveUserFromGroup
            - kms:ScheduleKeyDeletion
            - codedeploy:*
            - kms:DescribeKey
            - iam:CreatePolicyVersion
            - kinesisanalytics:*
            - elasticloadbalancing:*
            - iam:UntagServerCertificate
            - iam:TagUser
            - support:*
            - kms:UpdateAlias
            - kinesisvideo:*
            - iam:UntagUser
            - kms:GenerateDataKey
            - route53:*
            - lambda:*
            - codepipeline:*
            - guardduty:DescribeOrganizationConfiguration
            - elasticache:*
            Resource: '*'
        -   Sid: VisualEditor2
            Effect: Deny
            Action:
            - directconnect:DeleteDirectConnectGatewayAssociationProposal
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:ModifyVpcEndpointServiceConfiguration
            - cloudtrail:StopLogging
            - ec2:AcceptVpcPeeringConnection
            - ec2:CreateNatGateway
            - ec2:AttachInternetGateway
            - ec2:AcceptTransitGatewayVpcAttachment
            - ec2:AssociateVpcCidrBlock
            - directconnect:DeleteDirectConnectGateway
            - ec2:CreateInternetGateway
            - ec2:CreateTransit*
            - ec2:ModifyVpcPeeringConnectionOptions
            - ec2:AssociateTransitGatewayRouteTable
            - ec2:ModifyVpcAttribute
            - ec2:DeleteInternetGateway
            - config:DeleteConfigRule
            - directconnect:DeleteBGPPeer
            - ec2:AssociateDhcpOptions
            - ec2:DeleteEgressOnlyInternetGateway
            - ec2:AcceptVpcEndpointConnections
            - config:PutConfigRule
            - ec2:ModifyVpcEndpointConnectionNotification
            - ec2:AllocateAddress
            - directconnect:DeleteInterconnect
            - ec2:ModifyVpcEndpointServicePayerResponsibility
            - directconnect:DeleteDirectConnectGatewayAssociation
            - ec2:DeleteCustomerGateway
            - cloudtrail:DeleteTrail
            - ec2:AssociateSubnetCidrBlock
            - ec2:DeleteDhcpOptions
            - directconnect:DeleteConnection
            - ec2:ModifyVpcTenancy
            - ec2:CreateEgressOnlyInternetGateway
            - ec2:DeleteTransit*
            - ec2:ModifyVpcEndpoint
            Resource: '*'
        -   Sid: VisualEditor3
            Effect: Deny
            Action: ec2:Delete*
            Resource: '*'
            Condition:
                StringEquals:
                    ec2:ResourceTag/ManagedBy: Platform
        -   Sid: VisualEditor4
            Effect: Deny
            Action:
            - iam:Delete*
            - iam:Tag*
            - iam:Remove*
            - iam:Update*
            - iam:Detach*
            - iam:Untag*
            - iam:CreatePolicyVersion
            - iam:AddRoleToInstanceProfile
            - iam:Put*
            - iam:SetDefaultPolicyVersion
            Resource: '*'
            Condition:
                StringEquals:
                    iam:ResourceTag/ManagedBy: Platform
        -   Sid: VisualEditor5
            Effect: Deny
            Action:
            - iam:DeleteUserPermissionsBoundary
            - iam:DeleteRolePermissionsBoundary
            Resource: '*'
            Condition:
                StringEquals:
                    aws:ResourceTag/ManagedBy: Platform
        -   Sid: VisualEditor6
            Effect: Deny
            Action:
            - iam:UntagPolicy
            - iam:DeletePolicy
            - iam:CreatePolicyVersion
            - iam:DeletePolicyVersion
            - iam:SetDefaultPolicyVersion
            Resource: arn:aws:iam::*:policy/Tef-Environment*
    path: /
-   policyName: lambda-deny-vpc
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: DenyCreateLambdaWithoutVPC
            Effect: Deny
            Action: lambda:CreateFunction
            Resource: '*'
            Condition:
                'Null':
                    lambda:VpcIds: 'true'
    path: /
-   policyName: Tef-Environment-Admin
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - iam:PutRolePermissionsBoundary
            - iam:PutUserPermissionsBoundary
            - iam:CreateRole
            - iam:CreateUser
            Resource: '*'
            Condition:
                ForAnyValue:StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::*:policy/Tef-Environment-Admin
        -   Sid: VisualEditor1
            Effect: Allow
            Action: iam:PassRole
            Resource:
            - arn:aws:iam::*:role/Tef
            - arn:aws:iam::909180469036:role/aws-service-role/*
        -   Sid: VisualEditor2
            Effect: Allow
            Action:
            - iam:DeleteAccessKey
            - iam:List*
            - rds:*
            - firehose:*
            - iam:GenerateServiceLastAccessedDetails
            - redshift:*
            - backup:*
            - iam:PutRolePolicy
            - guardduty:GetDetector
            - iam:AddRoleToInstanceProfile
            - dms:*
            - codebuild:*
            - iam:SimulateCustomPolicy
            - kms:Encrypt
            - guardduty:GetMemberDetectors
            - iam:UploadSSHPublicKey
            - quicksight:*
            - iam:DetachGroupPolicy
            - guardduty:GetFilter
            - guardduty:ListTagsForResource
            - sns:*
            - states:*
            - apigateway:*
            - guardduty:GetMasterAccount
            - iam:DeleteRole
            - iam:UpdateRoleDescription
            - iam:TagPolicy
            - guardduty:GetMalwareScanSettings
            - codecommit:*
            - cloudwatch:*
            - ecs:*
            - ec2:*
            - guardduty:ListFilters
            - guardduty:GetInvitationsCount
            - iam:CreateInstanceProfile
            - iam:GenerateCredentialReport
            - guardduty:GetFindings
            - iam:UntagRole
            - kms:GenerateRandom
            - kms:PutKeyPolicy
            - iam:PutRolePermissionsBoundary
            - iam:TagRole
            - cloudtrail:*
            - kms:Verify
            - kms:ListResourceTags
            - athena:*
            - iam:DeleteRolePolicy
            - kms:CreateKey
            - guardduty:DescribePublishingDestination
            - iam:DeleteAccountAlias
            - kms:CreateGrant
            - iam:get*
            - iam:DeleteInstanceProfile
            - kms:EnableKeyRotation
            - elasticfilesystem:*
            - guardduty:ListDetectors
            - s3:*
            - iam:PutUserPermissionsBoundary
            - kms:GetKeyPolicy
            - iam:DeleteUser
            - guardduty:GetIPSet
            - iam:CreatePolicy
            - iam:CreateServiceLinkedRole
            - guardduty:GetUsageStatistics
            - iam:PutUserPolicy
            - ssm:*
            - iam:TagServerCertificate
            - kms:CreateAlias
            - iam:UntagPolicy
            - guardduty:ListOrganizationAdminAccounts
            - ecr:*
            - iam:UpdateRole
            - iam:UntagOpenIDConnectProvider
            - iam:UntagInstanceProfile
            - guardduty:GetFindingsStatistics
            - iam:TagOpenIDConnectProvider
            - iam:TagInstanceProfile
            - kms:Decrypt
            - guardduty:ListThreatIntelSets
            - guardduty:GetThreatIntelSet
            - logs:*
            - iam:RemoveRoleFromInstanceProfile
            - iam:AttachRolePolicy
            - iam:TagSAMLProvider
            - autoscaling:*
            - guardduty:DescribeMalwareScans
            - guardduty:ListInvitations
            - iam:DetachRolePolicy
            - iam:SimulatePrincipalPolicy
            - config:*
            - kinesis:*
            - iam:DetachUserPolicy
            - guardduty:ListPublishingDestinations
            - events:*
            - directconnect:*
            - guardduty:ListMembers
            - guardduty:ListIPSets
            - iam:UpdateUser
            - iam:AttachUserPolicy
            - cloudformation:*
            - iam:UpdateAccessKey
            - guardduty:GetMembers
            - s3-object-lambda:*
            - iam:DeleteServiceLinkedRole
            - eks:*
            - iam:DeletePolicy
            - datasync:*
            - guardduty:ListFindings
            - iam:CreateAccessKey
            - iam:AddUserToGroup
            - iam:RemoveUserFromGroup
            - kms:TagResource
            - kms:ScheduleKeyDeletion
            - codedeploy:*
            - kms:DescribeKey
            - iam:CreatePolicyVersion
            - kinesisanalytics:*
            - elasticloadbalancing:*
            - iam:UntagServerCertificate
            - iam:TagUser
            - kms:UpdateAlias
            - support:*
            - iam:UntagUser
            - kinesisvideo:*
            - lambda:*
            - route53:*
            - kms:GenerateDataKey
            - codepipeline:*
            - guardduty:DescribeOrganizationConfiguration
            - elasticache:*
            Resource: '*'
        -   Sid: VisualEditor3
            Effect: Deny
            Action:
            - directconnect:DeleteDirectConnectGatewayAssociationProposal
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:ModifyVpcEndpointServiceConfiguration
            - cloudtrail:StopLogging
            - ec2:AcceptVpcPeeringConnection
            - ec2:CreateNatGateway
            - ec2:AttachInternetGateway
            - ec2:AcceptTransitGatewayVpcAttachment
            - ec2:AssociateVpcCidrBlock
            - directconnect:DeleteDirectConnectGateway
            - ec2:CreateInternetGateway
            - ec2:CreateTransit*
            - ec2:ModifyVpcPeeringConnectionOptions
            - ec2:AssociateTransitGatewayRouteTable
            - ec2:ModifyVpcAttribute
            - ec2:DeleteInternetGateway
            - config:DeleteConfigRule
            - directconnect:DeleteBGPPeer
            - ec2:AssociateDhcpOptions
            - ec2:DeleteEgressOnlyInternetGateway
            - ec2:AcceptVpcEndpointConnections
            - config:PutConfigRule
            - ec2:ModifyVpcEndpointConnectionNotification
            - ec2:AllocateAddress
            - directconnect:DeleteInterconnect
            - ec2:ModifyVpcEndpointServicePayerResponsibility
            - ec2:DeleteCustomerGateway
            - directconnect:DeleteDirectConnectGatewayAssociation
            - cloudtrail:DeleteTrail
            - ec2:AssociateSubnetCidrBlock
            - ec2:DeleteDhcpOptions
            - ec2:ModifyVpcTenancy
            - directconnect:DeleteConnection
            - ec2:CreateEgressOnlyInternetGateway
            - ec2:DeleteTransit*
            - ec2:ModifyVpcEndpoint
            Resource: '*'
        -   Sid: VisualEditor4
            Effect: Deny
            Action: ec2:Delete*
            Resource: '*'
            Condition:
                StringEquals:
                    ec2:ResourceTag/ManagedBy: Platform
        -   Sid: VisualEditor5
            Effect: Deny
            Action:
            - iam:Delete*
            - iam:Tag*
            - iam:Remove*
            - iam:Update*
            - iam:Detach*
            - iam:Untag*
            - iam:CreatePolicyVersion
            - iam:AddRoleToInstanceProfile
            - iam:Put*
            - iam:SetDefaultPolicyVersion
            Resource: '*'
            Condition:
                StringEquals:
                    iam:ResourceTag/ManagedBy: Platform
        -   Sid: VisualEditor6
            Effect: Deny
            Action:
            - iam:DeleteUserPermissionsBoundary
            - iam:DeleteRolePermissionsBoundary
            Resource: '*'
            Condition:
                StringEquals:
                    aws:ResourceTag/ManagedBy: Platform
        -   Sid: VisualEditor7
            Effect: Deny
            Action:
            - iam:UntagPolicy
            - iam:DeletePolicy
            - iam:CreatePolicyVersion
            - iam:DeletePolicyVersion
            - iam:SetDefaultPolicyVersion
            Resource: arn:aws:iam::*:policy/Tef-Environment*
    path: /
    tags:
    -   Key: ManagedBy
        Value: Platform
-   policyName: TEF-KMS-User
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: KMSUSerPolicy
            Effect: Allow
            Action:
            - kms:EnableKey
            - kms:GetPublicKey
            - kms:ImportKeyMaterial
            - kms:Decrypt
            - kms:UntagResource
            - kms:GenerateRandom
            - kms:GenerateDataKeyWithoutPlaintext
            - kms:Verify
            - kms:ListResourceTags
            - kms:CancelKeyDeletion
            - kms:GenerateDataKeyPair
            - kms:GetParametersForImport
            - kms:DescribeCustomKeyStores
            - kms:DeleteCustomKeyStore
            - kms:TagResource
            - kms:UpdateCustomKeyStore
            - kms:Encrypt
            - kms:GetKeyRotationStatus
            - kms:ScheduleKeyDeletion
            - kms:ReEncryptTo
            - kms:DescribeKey
            - kms:CreateKey
            - kms:ConnectCustomKeyStore
            - kms:Sign
            - kms:EnableKeyRotation
            - kms:ListKeyPolicies
            - kms:UpdateKeyDescription
            - kms:ListRetirableGrants
            - kms:GetKeyPolicy
            - kms:DeleteImportedKeyMaterial
            - kms:GenerateDataKeyPairWithoutPlaintext
            - kms:DisableKey
            - kms:ReEncryptFrom
            - kms:DisableKeyRotation
            - kms:ListGrants
            - kms:UpdateAlias
            - kms:CreateCustomKeyStore
            - kms:ListKeys
            - kms:ListAliases
            - kms:GenerateDataKey
            - kms:CreateAlias
            - kms:DisconnectCustomKeyStore
            - kms:DeleteAlias
            Resource: '*'
    path: /
-   policyName: telus-iot-iam-permission-boundary
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: AllowedServicesForIoT
            Effect: Allow
            Action:
            - iot:*
            - cloudtrail:*
            - dynamodb:*
            - sqs:*
            - codebuild:*
            - application-cost-profiler:*
            - secretsmanager:*
            - kms:*
            - cur:*
            - xray:*
            - events:*
            - sns:*
            - cloudshell:*
            - codeartifact:*
            - apigateway:*
            - s3:*
            - cloudformation:*
            - cloud9:*
            - kinesisvideo:*
            - codecommit:*
            - cloudwatch:*
            - ssm:*
            - lambda:*
            - ec2:*
            - codepipeline:*
            - servicecatalog:*
            - ce:*
            Resource: '*'
        -   Sid: CreateRoleWithPermissionBoundary
            Effect: Allow
            Action: iam:CreateRole
            Resource: '*'
            Condition:
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::123456789:policy/boundary/telus-iot-iam-permission-boundary
        -   Sid: DenyDeletePermissionBoundary
            Effect: Deny
            Action: iam:DeleteRolePermissionsBoundary
            Resource: '*'
        -   Sid: DenyIAMPolicyCreationinBoundaryPath
            Effect: Deny
            Action:
            - iam:CreatePolicy
            - iam:CreatePolicyVersion
            Resource: arn:aws:iam::*:policy/boundary/*
        -   Sid: IAMPermissions
            Effect: Allow
            Action:
            - iam:CreateInstanceProfile
            - iam:GetPolicyVersion
            - iam:ListRoleTags
            - iam:ListPoliciesGrantingServiceAccess
            - iam:RemoveRoleFromInstanceProfile
            - iam:ListInstanceProfileTags
            - iam:AddRoleToInstanceProfile
            - iam:ListInstanceProfilesForRole
            - iam:SimulatePrincipalPolicy
            - iam:ListAttachedRolePolicies
            - iam:ListPolicyTags
            - iam:ListRolePolicies
            - iam:CreatePolicyVersion
            - iam:DeleteInstanceProfile
            - iam:GetRole
            - iam:GetInstanceProfile
            - iam:GetPolicy
            - iam:ListEntitiesForPolicy
            - iam:ListInstanceProfiles
            - iam:CreatePolicy
            - iam:CreateServiceLinkedRole
            - iam:ListPolicyVersions
            - iam:DeleteServiceLinkedRole
            - iam:UntagInstanceProfile
            - iam:GetRolePolicy
            - iam:DeletePolicyVersion
            - iam:TagInstanceProfile
            - iam:SetDefaultPolicyVersion
            Resource:
            - arn:aws:iam::*:policy/*
            - arn:aws:iam::*:instance-profile/*
            - arn:aws:iam::*:role/*
            - arn:aws:iam::*:group/*
        -   Sid: IAMPAssRole
            Effect: Allow
            Action: iam:PassRole
            Resource: '*'
            Condition:
                StringEquals:
                    iam:PassedToService:
                    - ec2.amazonaws.com
                    - lambda.amazonaws.com
        -   Sid: ListIAM
            Effect: Allow
            Action:
            - iam:ListPolicies
            - iam:SimulateCustomPolicy
            - iam:ListRoles
            - iam:ListSTSRegionalEndpointsStatus
            - iam:GetAccountSummary
            Resource: '*'
    path: /
-   policyName: SJ-Max
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action: s3:*
            Resource: '*'
    path: /
-   policyName: aws2cloudexec-moderna-managed
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Action:
            - acm:Describe*
            - acm:Get*
            - acm:List*
            - acm:Request*
            - acm:Resend*
            - cloudtrail:Describe*
            - cloudtrail:GetT*
            - cloudtrail:List*
            - cloudtrail:LookupEvents
            - cloudtrail:StartLogging
            - cloudtrail:StopLogging
            - codecommit:BatchGetRepositories
            - codecommit:Create*
            - codecommit:Get*
            - codecommit:GitPull
            - codecommit:GitPush
            - codecommit:List*
            - codecommit:Put*
            - codecommit:Test*
            - codecommit:Update*
            - ds:DescribeDirectories
            - ec2:Allocate*
            - ec2:AssignPrivateIpAddresses*
            - ec2:Associate*
            - ec2:Allocate*
            - ec2:AttachInternetGateway
            - ec2:AttachNetworkInterface
            - ec2:AttachVpnGateway
            - ec2:Bundle*
            - ec2:Cancel*
            - ec2:Copy*
            - ec2:Create*
            - ec2:Describe*
            - ec2:DetachNetworkInterface
            - ec2:EnableVgwRoutePropagation
            - ec2:EnableVolumeIO
            - ec2:EnableVpcClassicLinkDnsSupport
            - ec2:Get*
            - ec2:Import*
            - ec2:Modify*
            - ec2:MonitorInstances
            - ec2:MoveAddressToVpc
            - ec2:RegisterImage
            - ec2:Release*
            - ec2:Replace*
            - ec2:ReportInstanceStatus
            - ec2:Request*
            - ec2:Reset*
            - ec2:RestoreAddressToClassic
            - ec2:RunScheduledInstances
            - ec2:UnassignPrivateIpAddresses
            - ec2:UnmonitorInstances
            - ec2:UpdateSecurityGroupRuleDescriptionsEgress
            - ec2:UpdateSecurityGroupRuleDescriptionsIngress
            - elasticloadbalancing:DescribeLoadBalancers
            - elasticloadbalancing:RegisterInstancesWithLoadBalancer
            - iam:GetAccount*
            - iam:GetContextKeys*
            - iam:GetCredentialReport
            - iam:List*
            - iam:Simulate*
            - iam:UpdateServerCertificate
            - iam:UpdateSigningCertificate
            - kinesis:ListStreams
            - kinesis:PutRecord
            - kms:CreateAlias
            - kms:CreateKey
            - kms:Describe*
            - kms:GenerateRandom
            - kms:Get*
            - kms:List*
            - kms:Encrypt
            - kms:ReEncrypt*
            - lambda:Create*
            - lambda:Get*
            - lambda:InvokeFunction
            - lambda:List*
            - lambda:PublishVersion
            - lambda:Update*
            - rds:Describe*
            - rds:ListTagsForResource
            - trustedadvisor:DescribeAccount
            - trustedadvisor:ListRoots
            - sqs:List*
            - route53:ListHostedZones
            - route53domains:ListDomains
            - sns:List*
            - ses:List*
            - logs:DescribeLogGroups
            - events:ListEventSources
            - cloudwatch:List*
            - codedeploy:List*
            - codedeploy:Get*
            - config:List*
            - config:Describe*
            - autoscaling-plans:Describe*
            - autoscaling-plans:Get*
            - ecs:List*
            - ecs:Describe*
            - ecs:Get*
            - backup:List*
            - backup:Describe*
            - backup:StartBackupJob
            - backup:StartReportJob
            - backup:Get*
            - es:Describe*
            - es:List*
            - es:Get*
            - es:Create*
            - glue:Get*
            - glue:List*
            - glue:Query*
            - glue:Get*
            - glue:Batch*
            - glue:Create*
            - glue:Start*
            - storagegateway:List*
            - storagegateway:Describe*
            - storagegateway:Create*
            - sagemaker:List*
            - sagemaker:Describe*
            - sagemaker:Get*
            - sagemaker:Create*
            - sagemaker:Start*
            - aps:List*
            - aps:Create*
            - aps:Get*
            - shield:List*
            - shield:Describe*
            - shield:Create*
            - shield:Describe*
            - detective:List*
            - detective:Get*
            - detective:Create*
            - guardduty:List*
            - guardduty:Describe*
            - guardduty:Get*
            - guardduty:Create*
            - eks:List*
            - eks:Describe*
            - eks:Create*
            - eks:Update*
            - elasticache:Describe*
            - elasticache:List*
            - elasticache:Create*
            - securityhub:GetInsights
            - securityhub:ListInvitations
            - connect:Get*
            - connect:List*
            - connect:Describe*
            - connect:Search*
            - connect:Create*
            - connect:Start*
            - mobiletargeting:Get*
            - mobiletargeting:List*
            - mobiletargeting:Create*
            - inspector:List*
            - inspector2:List*
            - inspector:Describe*
            - inspector:Get*
            - inspector:AddAttributesToFindings
            - inspector2:Get*
            - inspector2:Create*
            - transfer:List*
            - transfer:Describe*
            - transfer:Create*
            Resource: '*'
            Effect: Allow
        -   Action:
            - ec2:AcceptVpcPeeringConnection
            - ec2:AttachClassicLinkVpc
            - ec2:AttachVolume
            - ec2:AuthorizeSecurityGroupEgress
            - ec2:AuthorizeSecurityGroupIngress
            - ec2:CreateVpcPeeringConnection
            - ec2:EnableVpcClassicLink
            - ec2:GetConsoleScreenshot
            - ec2:RebootInstances
            - ec2:RejectVpcPeeringConnection
            - ec2:RevokeSecurityGroupEgress
            - ec2:RevokeSecurityGroupIngress
            - ec2:RunInstances
            - ec2:StartInstances
            - ec2:StopInstances
            - ec2:TerminateInstances
            - ec2:CopySnapshot
            - ec2:CreateSnapshot
            - ec2:CreateSnapshots
            - ec2:DeleteSnapshot
            - ec2:Deregister*
            - ses:Create*
            - ses:List*
            - ses:Describe*
            - ses:Delete*
            Resource:
            - '*'
            Effect: Allow
        -   Action:
            - iam:GetAccessKeyLastUsed
            - iam:GetGroup*
            - iam:GetInstanceProfile
            - iam:GetLoginProfile
            - iam:GetOpenIDConnectProvider
            - iam:GetPolicy*
            - iam:GetRole*
            - iam:GetSAMLProvider
            - iam:GetSSHPublicKey
            - iam:GetServerCertificate
            - iam:GetServiceLastAccessed*
            - iam:GetUser*
            - iam:ListAccessKeys
            - iam:ListAttached*
            - iam:ListEntitiesForPolicy
            - iam:ListGroupPolicies
            - iam:ListGroupsForUser
            - iam:ListInstanceProfiles*
            - iam:ListMFADevices
            - iam:ListPolicyVersions
            - iam:ListRolePolicies
            - iam:ListSSHPublicKeys
            - iam:ListSigningCertificates
            - iam:ListUserPolicies
            - iam:Upload*
            - iam:CreateRole
            - iam:CreatePolicy
            - iam:CreatePolicyVersion
            - elasticfilesystem:Describe*
            - elasticfilesystem:ClientMount
            - elasticfilesystem:Create*
            - elasticfilesystem:ListTagsForResource
            - appstream:ListEntitledApplications
            - appstream:Describe*
            - appstream:Create*
            - redshift:Describe*
            - redshift:List*
            - redshift:View*
            - redshift:Get*
            - redshift:Create*
            - redshift:ResizeCluster
            Resource:
            - '*'
            Effect: Allow
        -   Action:
            - iam:PassRole
            Resource:
            - '*'
            Effect: Allow
        -   Action:
            - iam:GetRole
            - iam:ListRoles
            - iam:PassRole
            Resource:
            - arn:aws:iam::*:role/rds-monitoring-role
            - arn:aws:iam::*:role/ec2-sysadmin-*
            - arn:aws:iam::*:role/ecr-sysadmin-*
            - arn:aws:iam::*:role/lambda-sysadmin-*
            Effect: Allow
        -   Action:
            - s3:GetObject
            Resource:
            - arn:aws:s3:::moderna-cfn-templates/ssm/*
            Effect: Allow
            Sid: AllowSpecificObject
        -   Resource: '*'
            Effect: Allow
            NotAction: s3:GetObject
    path: /
-   policyName: tenant-iam-acmdnsvalidationrolepolicy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action: route53:ChangeResourceRecordSets
            Resource:
            - '*'
            - arn:aws:route53:::hostedzone/Z02117482HC1Y0ASH2RZA
    path: /
-   policyName: ScopePermissions
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: AllowStatement
            Effect: Allow
            NotAction:
            - route53resolver:*
            - route53domains:*
            - route53:*
            - purchase-orders:*PurchaseOrders
            - organizations:*
            - networkmanager:*
            - globalaccelerator:*
            - ec2:SearchTransitGatewayRoutes
            - ec2:RestoreAddressToClassic
            - ec2:ResetNetworkInterfaceAttribute
            - ec2:ReplaceTransitGatewayRoute
            - ec2:ReplaceRouteTableAssociation
            - ec2:ReplaceRoute
            - ec2:ReplaceNetworkAclEntry
            - ec2:ReplaceNetworkAclAssociation
            - ec2:ReleaseAddress
            - ec2:RejectVpcPeeringConnection
            - ec2:RejectVpcEndpointConnections
            - ec2:RejectTransitGatewayVpcAttachment
            - ec2:MoveAddressToVpc
            - ec2:ModifyVpcTenancy
            - ec2:ModifyVpcPeeringConnectionOptions
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:ModifyVpcEndpointServiceConfiguration
            - ec2:ModifyVpcEndpointConnectionNotification
            - ec2:ModifyVpcEndpoint
            - ec2:ModifyVpcAttribute
            - ec2:ModifyTransitGatewayVpcAttachment
            - ec2:ModifySubnetAttribute
            - ec2:ModifyNetworkInterfaceAttribute
            - ec2:GetTransitGatewayRouteTablePropagations
            - ec2:GetTransitGatewayRouteTableAssociations
            - ec2:GetTransitGatewayAttachmentPropagations
            - ec2:ExportTransitGatewayRoutes
            - ec2:EnableVpcClassicLinkDnsSupport
            - ec2:EnableVpcClassicLink
            - ec2:EnableVgwRoutePropagation
            - ec2:EnableTransitGatewayRouteTablePropagation
            - ec2:DisassociateVpcCidrBlock
            - ec2:DisassociateTransitGatewayRouteTable
            - ec2:DisassociateSubnetCidrBlock
            - ec2:DisassociateRouteTable
            - ec2:DisassociateAddress
            - ec2:DisableVpcClassicLinkDnsSupport
            - ec2:DisableVpcClassicLink
            - ec2:DisableVgwRoutePropagation
            - ec2:DisableTransitGatewayRouteTablePropagation
            - ec2:DetachVpnGateway
            - ec2:DetachNetworkInterface
            - ec2:DetachInternetGateway
            - ec2:DetachClassicLinkVpc
            - ec2:DeleteVpnGateway
            - ec2:DeleteVpnConnectionRoute
            - ec2:DeleteVpnConnection
            - ec2:DeleteVpcPeeringConnection
            - ec2:DeleteVpcEndpoints
            - ec2:DeleteVpcEndpointServiceConfigurations
            - ec2:DeleteVpcEndpointConnectionNotifications
            - ec2:DeleteVpc
            - ec2:DeleteTransitGatewayVpcAttachment
            - ec2:DeleteTransitGatewayRouteTable
            - ec2:DeleteTransitGatewayRoute
            - ec2:DeleteTransitGateway
            - ec2:DeleteSubnet
            - ec2:DeleteRouteTable
            - ec2:DeleteRoute
            - ec2:DeleteNetworkInterfacePermission
            - ec2:DeleteNetworkInterface
            - ec2:DeleteNetworkAclEntry
            - ec2:DeleteNetworkAcl
            - ec2:DeleteNatGateway
            - ec2:DeleteInternetGateway
            - ec2:DeleteFlowLogs
            - ec2:DeleteEgressOnlyInternetGateway
            - ec2:DeleteDhcpOptions
            - ec2:DeleteCustomerGateway
            - ec2:CreateVpnGateway
            - ec2:CreateVpnConnectionRoute
            - ec2:CreateVpnConnection
            - ec2:CreateVpcPeeringConnection
            - ec2:CreateVpcEndpointServiceConfiguration
            - ec2:CreateVpcEndpointConnectionNotification
            - ec2:CreateVpcEndpoint
            - ec2:CreateVpc
            - ec2:CreateTransitGatewayVpcAttachment
            - ec2:CreateTransitGatewayRouteTable
            - ec2:CreateTransitGatewayRoute
            - ec2:CreateTransitGateway
            - ec2:CreateSubnet
            - ec2:CreateRouteTable
            - ec2:CreateRoute
            - ec2:CreateNetworkInterfacePermission
            - ec2:CreateNetworkInterface
            - ec2:CreateNetworkAclEntry
            - ec2:CreateNetworkAcl
            - ec2:CreateInternetGateway
            - ec2:CreateFlowLogs
            - ec2:CreateEgressOnlyInternetGateway
            - ec2:CreateDhcpOptions
            - ec2:CreateDefaultVpc
            - ec2:CreateDefaultSubnet
            - ec2:CreateCustomerGateway
            - ec2:AttachVpnGateway
            - ec2:AttachNetworkInterface
            - ec2:AttachInternetGateway
            - ec2:AttachClassicLinkVpc
            - ec2:AssociateVpcCidrBlock
            - ec2:AssociateTransitGatewayRouteTable
            - ec2:AssociateSubnetCidrBlock
            - ec2:AssociateRouteTable
            - ec2:AssociateDhcpOptions
            - ec2:AllocateAddress
            - ec2:AcceptVpcPeeringConnection
            - ec2:AcceptVpcEndpointConnections
            - ec2:AcceptTransitGatewayVpcAttachment
            - directconnect:*
            - cur:*
            - cloudtrail:stop*
            - cloudtrail:Remove*
            - cloudtrail:Put*
            - cloudtrail:Delete*
            - cloudtrail:Create*
            - cloudfront:*
            - budgets:ViewBudget
            - budgets:ModifyBudget
            - aws-portal:*Usage
            - aws-portal:*PaymentMethods
            - aws-portal:*Billing
            - account:*
            - iam:Update*
            - iam:Untag*
            - iam:Tag*
            - iam:Set*
            - iam:ResyncMFADevice
            - iam:ResetServiceSpecificCredential
            - iam:Remove*
            - iam:Put*
            - iam:EnableMFADevice
            - iam:Detach*
            - iam:Delete*
            - iam:DeactivateMFADevice
            - iam:ChangePassword
            - iam:Attach*
            - iam:Add*
            Resource: '*'
        -   Sid: AllowIAMactions
            Effect: Allow
            Action:
            - iam:AttachRolePolicy
            - iam:CreateRole
            - iam:DeleteRole
            - iam:PutRolePolicy
            - iam:DeleteRolePolicy
            - iam:DetachRolePolicy
            - iam:PutRolePermissionsBoundary
            - iam:DeletePolicy
            - iam:DeletePolicyVersion
            - iam:CreatePolicyVersion
            - iam:SetDefaultPolicyVersion
            - iam:CreatePolicy
            - iam:*User*
            - iam:CreatePolicy
            - iam:CreateInstanceProfile
            - iam:AddRoleToInstanceProfile
            - iam:DeleteInstanceProfile
            - iam:RemoveRoleFromInstanceProfile
            Resource: '*'
        -   Sid: DenyPermBoundaryIAMPolicyAlteration
            Effect: Deny
            Action:
            - iam:DeletePolicy
            - iam:DeletePolicyVersion
            - iam:CreatePolicyVersion
            - iam:SetDefaultPolicyVersion
            Resource:
            - arn:aws:iam::909180469036:policy/ScopePermissions
        -   Sid: DenyRemovalOfPermBoundaryFromAnyRole
            Effect: Deny
            Action: iam:DeleteRolePermissionsBoundary
            Resource: arn:aws:iam::909180469036:role/*
        -   Sid: DenyAccessIfRequiredPermBoundaryIsNotBeingApplied
            Effect: Deny
            Action:
            - iam:PutRolePermissionsBoundary
            - iam:CreateRole
            Resource: arn:aws:iam::909180469036:role/*
            Condition:
                StringNotEquals:
                    iam:PermissionsBoundary: arn:aws:iam::909180469036:policy/ScopePermissions
        -   Sid: DenyIAMifCCS
            Effect: Deny
            Action:
            - iam:Delete*
            - iam:Untag*
            - iam:Tag*
            - iam:Put*
            - iam:Remove*
            - iam:Update*
            - iam:AddRoleToInstanceProfile
            - iam:Detach*
            - iam:Attach*
            - iam:CreatePolicyVersion
            - iam:SetDefaultPolicyVersion
            Resource: '*'
            Condition:
                StringEquals:
                    iam:ResourceTag/ManagedBy: ccs
    path: /
-   policyName: TestPerm
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Deny
            Action:
            - iam:PutUserPolicy
            - iam:CreateRole
            - iam:PutRolePolicy
            - iam:CreateUser
            Resource: '*'
            Condition:
                StringNotEquals:
                    iam:PermissionsBoundary: arn:aws:iam::909180469036:policy/SJ-Max
    path: /
-   policyName: AdminwithTag
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action: '*'
            Resource: '*'
        -   Sid: VisualEditor1
            Effect: Deny
            Action: ec2:*
            Resource: '*'
            Condition:
                StringEqualsIgnoreCase:
                    aws:ResourceTag/Owner: IsPlatform
        -   Sid: VisualEditor2
            Effect: Deny
            Action: s3:*
            Resource: '*'
            Condition:
                StringEqualsIgnoreCase:
                    aws:ResourceTag/Owner: IsPlatform
    path: /
-   policyName: Tef-Environment-Billing
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - application-cost-profiler:*
            - cur:*
            - budgets:*
            - ce:*
            Resource: '*'
    path: /
-   policyName: testpolicy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Deny
            Action: iam:CreateRole
            Resource: '*'
            Condition:
                StringNotLike:
                    aws:PrincipalArn: arn:aws:iam::909180469036:role/testrole/
                    iam:PermissionsBoundary: arn:aws:iam::909180469036:policy/Boundary
    path: /
-   policyName: PermissionBoundarySCP
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Deny
            Action: iam:CreateRole
            Resource: '*'
            Condition:
                'Null':
                    iam:PermissionsBoundary: 'false'
                StringNotEquals:
                    aws:PrincipalArn: arn:aws:iam::909180469036:role/test*
    path: /
-   policyName: DenyResourceCreationwithoutTag
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: AllowCreateWithValidTeamTag
            Effect: Allow
            Action:
            - iam:CreateRole
            - lambda:CreateFunction
            - secretsmanager:CreateSecret
            Resource: '*'
            Condition:
                StringEquals:
                    aws:RequestTag/team:
                    - squad1
                    - squad2
                    - squad3
                    - squad4
                    - squad5
                    - squad6
                    - squad7
                    - squad8
                    - squad9
                    - squad10
                    - squad11
                    - squad12
                    - squad13
    path: /
-   policyName: telus-iot-iam-permissionset-policy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action: iam:CreateRole
            Resource: '*'
            Condition:
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::123456789:policy/boundary/*
        -   Sid: VisualEditor3
            Effect: Deny
            Action: iam:DeleteRolePermissionsBoundary
            Resource: '*'
    path: /
roles: []
