account_id:
- '909180469036'
region: us-east-1
stack_name: iam-role-policies-pipeline-stack-Part1
iam_policies:
-   policyName: Tef-Permission-Environment-Admin
    deletionPolicy: RETAIN
    policyDocument:
        Statement:
        -   Effect: Allow
            NotAction:
            - route53resolver:*
            - route53domains:*
            - route53:*
            - purchase-orders:*PurchaseOrders
            - organizations:*
            - networkmanager:*
            - iam:Update*
            - iam:Untag*
            - iam:Tag*
            - iam:SetSecurityTokenServicePreferences
            - iam:Set*
            - iam:ResyncMFADevice
            - iam:ResetServiceSpecificCredential
            - iam:Remove*
            - iam:Put*
            - iam:EnableMFADevice
            - iam:Detach*
            - iam:Delete*
            - iam:DeactivateMFADevice
            - iam:Create*
            - iam:ChangePassword
            - iam:Attach*
            - iam:Add*
            - globalaccelerator:*
            - ec2:SearchTransitGatewayRoutes
            - ec2:RestoreAddressToClassic
            - ec2:ResetNetworkInterfaceAttribute
            - ec2:ReplaceTransitGatewayRoute
            - ec2:ReplaceRouteTableAssociation
            - ec2:ReplaceRoute
            - ec2:ReplaceNetworkAclEntry
            - ec2:ReplaceNetworkAclAssociation
            - ec2:ReleaseAddress
            - ec2:RejectVpcPeeringConnection
            - ec2:RejectVpcEndpointConnections
            - ec2:RejectTransitGatewayVpcAttachment
            - ec2:MoveAddressToVpc
            - ec2:ModifyVpcTenancy
            - ec2:ModifyVpcPeeringConnectionOptions
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:ModifyVpcEndpointServiceConfiguration
            - ec2:ModifyVpcEndpointConnectionNotification
            - ec2:ModifyVpcEndpoint
            - ec2:ModifyVpcAttribute
            - ec2:ModifyTransitGatewayVpcAttachment
            - ec2:ModifySubnetAttribute
            - ec2:ModifyNetworkInterfaceAttribute
            - ec2:GetTransitGatewayRouteTablePropagations
            - ec2:GetTransitGatewayRouteTableAssociations
            - ec2:GetTransitGatewayAttachmentPropagations
            - ec2:ExportTransitGatewayRoutes
            - ec2:EnableVpcClassicLinkDnsSupport
            - ec2:EnableVpcClassicLink
            - ec2:EnableVgwRoutePropagation
            - ec2:EnableTransitGatewayRouteTablePropagation
            - ec2:DisassociateVpcCidrBlock
            - ec2:DisassociateTransitGatewayRouteTable
            - ec2:DisassociateSubnetCidrBlock
            - ec2:DisassociateRouteTable
            - ec2:DisassociateAddress
            - ec2:DisableVpcClassicLinkDnsSupport
            - ec2:DisableVpcClassicLink
            - ec2:DisableVgwRoutePropagation
            - ec2:DisableTransitGatewayRouteTablePropagation
            - ec2:DisableEbsEncryptionByDefault
            - ec2:DetachVpnGateway
            - ec2:DetachNetworkInterface
            - ec2:DetachInternetGateway
            - ec2:DetachClassicLinkVpc
            - ec2:DeleteVpnGateway
            - ec2:DeleteVpnConnectionRoute
            - ec2:DeleteVpnConnection
            - ec2:DeleteVpcPeeringConnection
            - ec2:DeleteVpcEndpoints
            - ec2:DeleteVpcEndpointServiceConfigurations
            - ec2:DeleteVpcEndpointConnectionNotifications
            - ec2:DeleteVpc
            - ec2:DeleteTransitGatewayVpcAttachment
            - ec2:DeleteTransitGatewayRouteTable
            - ec2:DeleteTransitGatewayRoute
            - ec2:DeleteTransitGateway
            - ec2:DeleteSubnet
            - ec2:DeleteRouteTable
            - ec2:DeleteRoute
            - ec2:DeleteNetworkInterfacePermission
            - ec2:DeleteNetworkInterface
            - ec2:DeleteNetworkAclEntry
            - ec2:DeleteNetworkAcl
            - ec2:DeleteNatGateway
            - ec2:DeleteInternetGateway
            - ec2:DeleteFlowLogs
            - ec2:DeleteEgressOnlyInternetGateway
            - ec2:DeleteDhcpOptions
            - ec2:DeleteCustomerGateway
            - ec2:CreateVpnGateway
            - ec2:CreateVpnConnectionRoute
            - ec2:CreateVpnConnection
            - ec2:CreateVpcPeeringConnection
            - ec2:CreateVpcEndpointServiceConfiguration
            - ec2:CreateVpcEndpointConnectionNotification
            - ec2:CreateVpcEndpoint
            - ec2:CreateVpc
            - ec2:CreateTransitGatewayVpcAttachment
            - ec2:CreateTransitGatewayRouteTable
            - ec2:CreateTransitGatewayRoute
            - ec2:CreateTransitGateway
            - ec2:CreateSubnet
            - ec2:CreateRouteTable
            - ec2:CreateRoute
            - ec2:CreateNetworkInterfacePermission
            - ec2:CreateNetworkInterface
            - ec2:CreateNetworkAclEntry
            - ec2:CreateNetworkAcl
            - ec2:CreateInternetGateway
            - ec2:CreateFlowLogs
            - ec2:CreateEgressOnlyInternetGateway
            - ec2:CreateDhcpOptions
            - ec2:CreateDefaultVpc
            - ec2:CreateDefaultSubnet
            - ec2:CreateCustomerGateway
            - ec2:AttachVpnGateway
            - ec2:AttachNetworkInterface
            - ec2:AttachInternetGateway
            - ec2:AttachClassicLinkVpc
            - ec2:AssociateVpcCidrBlock
            - ec2:AssociateTransitGatewayRouteTable
            - ec2:AssociateSubnetCidrBlock
            - ec2:AssociateRouteTable
            - ec2:AssociateDhcpOptions
            - ec2:AllocateAddress
            - ec2:AcceptVpcPeeringConnection
            - ec2:AcceptVpcEndpointConnections
            - ec2:AcceptTransitGatewayVpcAttachment
            - directconnect:*
            - cur:*
            - cloudtrail:stop*
            - cloudtrail:Remove*
            - cloudtrail:Put*
            - cloudtrail:Delete*
            - cloudtrail:Create*
            - cloudfront:*
            - budgets:ViewBudget
            - budgets:ModifyBudget
            - awsbillingconsole:*Usage
            - awsbillingconsole:*PaymentMethods
            - awsbillingconsole:*Billing
            - aws-portal:*Usage
            - aws-portal:*PaymentMethods
            - aws-portal:*Billing
            - account:*
            Resource: '*'
            Sid: ''
        Version: '2012-10-17'
    path: /
-   policyName: ConfigAccessPolicy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Effect: Allow
            Action:
            - s3:CreateBucket
            - s3:DeleteBucket
            - s3:PutBucketPolicy
            Resource: arn:aws:s3:::config-bucket-trustedservice-do-not-delete-*
        -   Effect: Allow
            Action:
            - s3:ListAllMyBuckets
            Resource: arn:aws:s3:::*
        -   Effect: Allow
            Action:
            - config:*
            Resource: '*'
        -   Effect: Allow
            Action:
            - iam:GetRole
            - iam:PassRole
            - iam:CreateServiceLinkedRole
            - iam:DeleteServiceLinkedRole
            - iam:GetServiceLinkedRoleDeletionStatus
            Resource: arn:aws:iam::*:role/aws-service-role/config.amazonaws.com/*
    path: /
-   policyName: GitHubActions-CDKAssume
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - sts:GetSessionToken
            - sts:DecodeAuthorizationMessage
            - sts:GetAccessKeyInfo
            - sts:GetCallerIdentity
            - sts:GetServiceBearerToken
            Resource: '*'
        -   Sid: VisualEditor1
            Effect: Allow
            Action: sts:*
            Resource: arn:aws:iam::909180469036:user/GitHubActionsRole
    path: /
-   policyName: Boundary
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - iam:DetachRolePolicy
            - iam:DeleteRolePolicy
            - iam:CreateRole
            - iam:AttachRolePolicy
            - iam:PutRolePolicy
            Resource: '*'
            Condition:
                StringEquals:
                    iam:PermissionsBoundary: arn:aws:iam::909180469036:policy/SJ-Max
        -   Sid: VisualEditor1
            Effect: Allow
            Action:
            - iam:CreatePolicy
            - iam:GetRole
            - iam:DeletePolicy
            - iam:ListRoles
            - iam:DeleteRole
            - iam:GetRolePolicy
            Resource: '*'
    path: /
-   policyName: GitHubActionsPolicy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - sts:AssumeRole
            - ssm:GetParameter
            Resource:
            - arn:aws:ssm:us-east-1:***:parameter/cdk-bootstrap/hnb659fds/version
            - arn:aws:iam::*:role/GitHubActionsRoleforIAMUser
    path: /
-   policyName: GitHubActions-ACMProvisioning-CDKRoleASsume
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action: ssm:GetParameter
            Resource: '*'
        -   Sid: VisualEditor1
            Effect: Allow
            Action: sts:AssumeRole
            Resource: '*'
    path: /
-   policyName: Tef-Environment-DeveloperLite
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action: iam:CreateServiceLinkedRole
            Resource: '*'
            Condition:
                StringLike:
                    iam:AWSServiceName: elasticloadbalancing.amazonaws.com
        -   Sid: VisualEditor1
            Effect: Allow
            Action:
            - lambda:CreateFunction
            - ec2:AuthorizeSecurityGroupIngress
            - ec2:DescribeInstances
            - ec2:AttachInternetGateway
            - ec2:DescribeSnapshots
            - iam:AddRoleToInstanceProfile
            - kms:Encrypt
            - ec2:CreateRoute
            - ec2:DescribeVolumes
            - iam:ListRolePolicies
            - ec2:DescribeKeyPairs
            - iam:GetRole
            - elasticloadbalancing:SetLoadBalancerPoliciesForBackendServer
            - s3:GetBucketWebsite
            - iam:GetPolicy
            - ec2:ImportKeyPair
            - ec2:DescribeVpcClassicLinkDnsSupport
            - ec2:CreateTags
            - ecr:GetAuthorizationToken
            - ec2:AssignPrivateIpAddresses
            - s3:GetReplicationConfiguration
            - lambda:GetFunctionCodeSigningConfig
            - ec2:CreateVolume
            - elasticloadbalancing:AddTags
            - ec2:CreateSubnet
            - ec2:DescribeSubnets
            - iam:GetRolePolicy
            - ec2:CreateVpnConnection
            - iam:CreateInstanceProfile
            - logs:ListTagsLogGroup
            - ec2:AttachVolume
            - s3:GetLifecycleConfiguration
            - s3:GetBucketTagging
            - ec2:DescribeRegions
            - ec2:DescribeFlowLogs
            - ec2:CreateVpc
            - kms:ListResourceTags
            - ecr:ListImages
            - ec2:CreateSubnetCidrReservation
            - ec2:DescribeVpcAttribute
            - ec2:ModifySubnetAttribute
            - iam:ListInstanceProfilesForRole
            - iam:PassRole
            - ec2:DescribeAvailabilityZones
            - ec2:CreateSnapshot
            - kms:CreateKey
            - kms:CreateGrant
            - elasticloadbalancing:CreateLoadBalancerPolicy
            - elasticloadbalancing:CreateLoadBalancer
            - ec2:AssignIpv6Addresses
            - ec2:AttachVpnGateway
            - kms:GetKeyPolicy
            - s3:GetBucketVersioning
            - ec2:CreateVpnConnectionRoute
            - ec2:DescribeSecurityGroups
            - iam:CreatePolicy
            - iam:CreateServiceLinkedRole
            - elasticloadbalancing:SetLoadBalancerPoliciesOfListener
            - ec2:DescribeVpcs
            - s3:GetBucketCORS
            - iam:GetPolicyVersion
            - kms:Decrypt
            - iam:RemoveRoleFromInstanceProfile
            - ec2:DescribeVolumesModifications
            - s3:CreateBucket
            - iam:CreateRole
            - iam:AttachRolePolicy
            - ec2:AssociateRouteTable
            - elasticloadbalancing:DeleteLoadBalancer
            - ec2:DescribeInternetGateways
            - s3:GetBucketObjectLockConfiguration
            - elasticloadbalancing:DescribeLoadBalancers
            - kms:GetKeyRotationStatus
            - iam:ListAttachedRolePolicies
            - autoscaling:DescribeAutoScalingGroups
            - elasticloadbalancing:DescribeLoadBalancerPolicies
            - ec2:CreateVpnGateway
            - autoscaling:UpdateAutoScalingGroup
            - ec2:DescribeAccountAttributes
            - ec2:DescribeNetworkAcls
            - ec2:DescribeRouteTables
            - ecr:BatchCheckLayerAvailability
            - ec2:ModifyVolume
            - ec2:DescribeVpnConnections
            - ecr:GetDownloadUrlForLayer
            - ec2:CreateRouteTable
            - ssm:GetParameters
            - logs:CreateLogGroup
            - ec2:DescribeVpcClassicLink
            - elasticloadbalancing:DescribeLoadBalancerAttributes
            - sts:AssumeRole
            - ecr:BatchGetImage
            - ec2:AssociateAddress
            - ec2:DescribeVpnGateways
            - lambda:ListVersionsByFunction
            - elasticloadbalancing:ConfigureHealthCheck
            - s3:GetBucketLogging
            - ec2:DescribeDhcpOptions
            - s3:GetAccelerateConfiguration
            - ec2:GetSubnetCidrReservations
            - s3:GetBucketPolicy
            - s3:GetEncryptionConfiguration
            - kms:TagResource
            - ec2:DescribeNetworkInterfaces
            - s3:GetBucketRequestPayment
            - kms:ScheduleKeyDeletion
            - ec2:CreateSecurityGroup
            - kms:DescribeKey
            - elasticloadbalancing:ApplySecurityGroupsToLoadBalancer
            - ecr:DescribeRepositories
            - ec2:ModifyVpcAttribute
            - ec2:ModifyInstanceAttribute
            - ec2:AuthorizeSecurityGroupEgress
            - elasticloadbalancing:AttachLoadBalancerToSubnets
            - iam:GetInstanceProfile
            - logs:DescribeLogGroups
            - elasticloadbalancing:DescribeTags
            - lambda:GetFunction
            - ec2:DescribeTags
            - s3:GetBucketAcl
            - ec2:DescribeCustomerGateways
            - elasticloadbalancing:CreateLoadBalancerListeners
            - ec2:AllocateAddress
            - ec2:DescribeImages
            - lambda:AddPermission
            - iam:ListPolicyVersions
            - iam:ListOpenIDConnectProviders
            - kms:GenerateDataKey
            - sts:GetCallerIdentity
            - ec2:CreateNetworkAclEntry
            - lambda:GetPolicy
            - ecr:GetRepositoryPolicy
            Resource: '*'
    path: /
-   policyName: Tef-Permission-Environment-AdminDelegation
    deletionPolicy: RETAIN
    policyDocument:
        Statement:
        -   Action: iam:CreateServiceLinkedRole
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - iam:TagPolicy
            - iam:TagInstanceProfile
            - iam:RemoveRoleFromInstanceProfile
            - iam:DetachRolePolicy
            - iam:DeleteRole
            - iam:DeletePolicyVersion
            - iam:DeletePolicy
            - iam:DeleteInstanceProfile
            - iam:CreateServiceLinkedRole
            - iam:CreatePolicyVersion
            - iam:CreatePolicy
            - iam:CreateInstanceProfile
            - iam:AddRoleToInstanceProfile
            Effect: Allow
            NotResource:
            - arn:aws:iam::*:role/vpc-flow-log*
            - arn:aws:iam::*:role/network-monitoring-nodes-role
            - arn:aws:iam::*:role/environment-readonly
            - arn:aws:iam::*:role/environment-developer
            - arn:aws:iam::*:role/environment-admin
            - arn:aws:iam::*:role/ccs-deployment
            - arn:aws:iam::*:role/ccs-*
            - arn:aws:iam::*:role/OrganizationAccountAccessRole
            - arn:aws:iam::*:policy/vpc-flow-log*
            - arn:aws:iam::*:policy/permissions-environment-developer-boundary
            - arn:aws:iam::*:policy/permissions-environment-developer*
            - arn:aws:iam::*:policy/permissions-environment-admin-boundary
            - arn:aws:iam::*:policy/permissions-environment-admin*
            - arn:aws:iam::*:policy/permissions-create-role-developer
            - arn:aws:iam::*:policy/permissions-create-role-admin
            - arn:aws:iam::*:instance-profile/network-monitoring-nodes-instance-profile
            Sid: ''
        -   Action: iam:DeleteServiceLinkedRole
            Effect: Allow
            NotResource:
            - arn:aws:iam::731937104315:role/aws-service-role/transitgateway.amazonaws.com/AWSServiceRoleForVPCTransitGateway
            - arn:aws:iam::731937104315:role/aws-service-role/ssm.amazonaws.com/AWSServiceRoleForAmazonSSM
            - arn:aws:iam::731937104315:role/aws-service-role/securityhub.amazonaws.com/AWSServiceRoleForSecurityHub
            - arn:aws:iam::731937104315:role/aws-service-role/remediation.config.amazonaws.com/AWSServiceRoleForConfigRemediation
            - arn:aws:iam::731937104315:role/aws-service-role/organizations.amazonaws.com/AWSServiceRoleForOrganizations
            - arn:aws:iam::731937104315:role/aws-service-role/license-manager.amazonaws.com/AWSServiceRoleForAWSLicenseMangerRole
            - arn:aws:iam::731937104315:role/aws-service-role/config.amazonaws.com/AWSServiceRoleForConfig
            Sid: ''
        -   Action: iam:CreateRole
            Condition:
                ForAllValues:StringEquals:
                    aws:TagKeys: ManagedBy
                StringEquals:
                    aws:RequestTag/ManagedBy: environment-operator
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::731937104315:policy/permissions-environment-admin-boundary
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action: iam:TagRole
            Condition:
                StringEquals:
                    aws:ResourceTag/ManagedBy: environment-operator
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - iam:PutRolePolicy
            - iam:PutRolePermissionsBoundary
            - iam:DeleteRolePolicy
            Condition:
                ForAllValues:StringEquals:
                    aws:TagKeys: ManagedBy
                StringEquals:
                    aws:ResourceTag/ManagedBy: environment-operator
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::731937104315:policy/permissions-environment-admin-boundary
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - iam:PutRolePolicy
            - iam:AttachRolePolicy
            Condition:
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::731937104315:policy/permissions-environment-admin-boundary
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:DescribeVpcEndpointServiceConfigurations
            - ec2:DeleteVpcEndpointServiceConfigurations
            - ec2:CreateVpcEndpointServiceConfiguration
            Effect: Allow
            Resource: '*'
            Sid: VPCLinksAccess
        -   Action: ec2:DisableEbsEncryptionByDefault
            Effect: Deny
            Resource: '*'
            Sid: DenyDisableEbsEncryptionAccess
        Version: '2012-10-17'
    path: /
-   policyName: Tef-Permission-Environment-Developer
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Condition:
                ForAnyValue:StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::*:policy/Environment-Developer-Teffff
            Action:
            - iam:PutRolePermissionsBoundary
            - iam:CreateRole
            Resource: '*'
            Effect: Allow
            Sid: VisualEditor0
        -   Action:
            - iam:List*
            - rds:*
            - firehose:*
            - iam:GenerateServiceLastAccessedDetails
            - redshift:*
            - backup:*
            - iam:PutRolePolicy
            - guardduty:GetDetector
            - dms:*
            - iam:AddRoleToInstanceProfile
            - codebuild:*
            - iam:SimulateCustomPolicy
            - guardduty:GetMemberDetectors
            - kms:Encrypt
            - iam:UploadSSHPublicKey
            - quicksight:*
            - iam:DetachGroupPolicy
            - guardduty:GetFilter
            - guardduty:ListTagsForResource
            - states:*
            - sns:*
            - apigateway:*
            - guardduty:GetMasterAccount
            - iam:DeleteRole
            - iam:UpdateRoleDescription
            - iam:TagPolicy
            - guardduty:GetMalwareScanSettings
            - codecommit:*
            - cloudwatch:*
            - ecs:*
            - ec2:*
            - guardduty:ListFilters
            - guardduty:GetInvitationsCount
            - iam:GenerateCredentialReport
            - iam:CreateInstanceProfile
            - guardduty:GetFindings
            - iam:UntagRole
            - kms:GenerateRandom
            - kms:PutKeyPolicy
            - cloudtrail:*
            - iam:PutRolePermissionsBoundary
            - iam:TagRole
            - kms:Verify
            - kms:ListResourceTags
            - iam:DeleteRolePermissionsBoundary
            - athena:*
            - iam:PassRole
            - iam:DeleteRolePolicy
            - kms:CreateKey
            - guardduty:DescribePublishingDestination
            - iam:DeleteAccountAlias
            - kms:CreateGrant
            - iam:get*
            - iam:DeleteInstanceProfile
            - kms:EnableKeyRotation
            - elasticfilesystem:*
            - guardduty:ListDetectors
            - s3:*
            - kms:GetKeyPolicy
            - guardduty:GetIPSet
            - iam:CreatePolicy
            - iam:CreateServiceLinkedRole
            - guardduty:GetUsageStatistics
            - ssm:*
            - iam:TagServerCertificate
            - kms:CreateAlias
            - iam:UntagPolicy
            - ecr:*
            - guardduty:ListOrganizationAdminAccounts
            - iam:UpdateRole
            - iam:UntagOpenIDConnectProvider
            - iam:UntagInstanceProfile
            - guardduty:GetFindingsStatistics
            - iam:TagOpenIDConnectProvider
            - iam:TagInstanceProfile
            - iam:UpdateAssumeRolePolicy
            - guardduty:ListThreatIntelSets
            - kms:Decrypt
            - guardduty:GetThreatIntelSet
            - logs:*
            - iam:RemoveRoleFromInstanceProfile
            - iam:CreateRole
            - dynamodb:*
            - iam:AttachRolePolicy
            - iam:TagSAMLProvider
            - autoscaling:*
            - guardduty:DescribeMalwareScans
            - guardduty:ListInvitations
            - iam:DetachRolePolicy
            - iam:SimulatePrincipalPolicy
            - config:*
            - kinesis:*
            - guardduty:ListPublishingDestinations
            - events:*
            - guardduty:ListMembers
            - directconnect:*
            - guardduty:ListIPSets
            - cloudformation:*
            - guardduty:GetMembers
            - s3-object-lambda:*
            - iam:DeleteServiceLinkedRole
            - eks:*
            - iam:DeletePolicy
            - datasync:*
            - xray:*
            - ram:*
            - guardduty:ListFindings
            - kms:TagResource
            - kms:ScheduleKeyDeletion
            - codedeploy:*
            - kms:DescribeKey
            - iam:CreatePolicyVersion
            - kinesisanalytics:*
            - elasticloadbalancing:*
            - iam:UntagServerCertificate
            - support:*
            - kms:UpdateAlias
            - kinesisvideo:*
            - lambda:*
            - route53:*
            - kms:GenerateDataKey
            - codepipeline:*
            - guardduty:DescribeOrganizationConfiguration
            - elasticache:*
            Resource: '*'
            Effect: Allow
            Sid: VisualEditor1
        -   Action:
            - directconnect:DeleteDirectConnectGatewayAssociationProposal
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:ModifyVpcEndpointServiceConfiguration
            - cloudtrail:StopLogging
            - ec2:AcceptVpcPeeringConnection
            - ec2:CreateNatGateway
            - ec2:AttachInternetGateway
            - ec2:AcceptTransitGatewayVpcAttachment
            - ec2:AssociateVpcCidrBlock
            - directconnect:DeleteDirectConnectGateway
            - ec2:CreateInternetGateway
            - ec2:CreateTransit*
            - ec2:ModifyVpcPeeringConnectionOptions
            - ec2:AssociateTransitGatewayRouteTable
            - ec2:ModifyVpcAttribute
            - ec2:DeleteInternetGateway
            - config:DeleteConfigRule
            - directconnect:DeleteBGPPeer
            - ec2:AssociateDhcpOptions
            - ec2:DeleteEgressOnlyInternetGateway
            - ec2:AcceptVpcEndpointConnections
            - config:PutConfigRule
            - ec2:ModifyVpcEndpointConnectionNotification
            - ec2:AllocateAddress
            - directconnect:DeleteInterconnect
            - ec2:ModifyVpcEndpointServicePayerResponsibility
            - ec2:DeleteCustomerGateway
            - directconnect:DeleteDirectConnectGatewayAssociation
            - cloudtrail:DeleteTrail
            - ec2:AssociateSubnetCidrBlock
            - ec2:DeleteDhcpOptions
            - ec2:ModifyVpcTenancy
            - directconnect:DeleteConnection
            - ec2:CreateEgressOnlyInternetGateway
            - ec2:DeleteTransit*
            - ec2:ModifyVpcEndpoint
            Resource: '*'
            Effect: Deny
            Sid: VisualEditor2
        -   Condition:
                StringEquals:
                    ec2:ResourceTag/ManagedBy: Platform
            Action: ec2:Delete*
            Resource: '*'
            Effect: Deny
            Sid: VisualEditor3
        -   Condition:
                StringEquals:
                    iam:ResourceTag/ManagedBy: Platform
            Action:
            - iam:Delete*
            - iam:Tag*
            - iam:Remove*
            - iam:Update*
            - iam:Detach*
            - iam:Untag*
            - iam:CreatePolicyVersion
            - iam:AddRoleToInstanceProfile
            - iam:Put*
            - iam:SetDefaultPolicyVersion
            Resource: '*'
            Effect: Deny
            Sid: VisualEditor4
        -   Condition:
                StringEquals:
                    aws:ResourceTag/ManagedBy: Platform
            Action:
            - iam:DeleteUserPermissionsBoundary
            - iam:DeleteRolePermissionsBoundary
            Resource: '*'
            Effect: Deny
            Sid: VisualEditor5
        -   Action:
            - iam:UntagPolicy
            - iam:DeletePolicy
            - iam:CreatePolicyVersion
            - iam:DeletePolicyVersion
            - iam:SetDefaultPolicyVersion
            Resource: arn:aws:iam::*:policy/Environment*
            Effect: Deny
            Sid: VisualEditor6
    path: /
-   policyName: telus-devops-iam-permission-boundary
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: VisualEditor0
            Effect: Allow
            Action:
            - codeguru-security:*
            - greengrass:*
            - iot:*
            - cloudtrail:*
            - codeguru:*
            - dynamodb:*
            - sqs:*
            - codebuild:*
            - application-cost-profiler:*
            - iam:SimulateCustomPolicy
            - secretsmanager:*
            - kms:*
            - cur:*
            - xray:*
            - events:*
            - inspector:*
            - states:*
            - sns:*
            - iam:ListPolicies
            - cloudshell:*
            - codewhisperer:*
            - codeartifact:*
            - s3:*
            - apigateway:*
            - cloudformation:*
            - iam:ListRoles
            - cloud9:*
            - kinesisvideo:*
            - codecommit:*
            - cloudwatch:*
            - ssm:*
            - lambda:*
            - codepipeline:*
            - ec2:*
            - servicecatalog:*
            - ce:*
            - proton:*
            - iam:ListSTSRegionalEndpointsStatus
            - iam:GetAccountSummary
            Resource: '*'
        -   Sid: VisualEditor1
            Effect: Allow
            Action: iam:CreateRole
            Resource: '*'
            Condition:
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::123456789:policy/boundary/telus-iot-iam-permission-boundary
        -   Sid: VisualEditor2
            Effect: Allow
            Action: iam:PassRole
            Resource: '*'
            Condition:
                StringEquals:
                    iam:PassedToService:
                    - ec2.amazonaws.com
                    - lambda.amazonaws.com
        -   Sid: VisualEditor3
            Effect: Allow
            Action:
            - iam:CreateInstanceProfile
            - iam:GetPolicyVersion
            - iam:ListRoleTags
            - iam:ListPoliciesGrantingServiceAccess
            - iam:RemoveRoleFromInstanceProfile
            - iam:ListInstanceProfileTags
            - iam:AddRoleToInstanceProfile
            - iam:ListInstanceProfilesForRole
            - iam:SimulatePrincipalPolicy
            - iam:ListAttachedRolePolicies
            - iam:ListPolicyTags
            - iam:ListRolePolicies
            - iam:CreatePolicyVersion
            - iam:DeleteInstanceProfile
            - iam:GetRole
            - iam:GetInstanceProfile
            - iam:GetPolicy
            - iam:ListEntitiesForPolicy
            - iam:CreatePolicy
            - iam:CreateServiceLinkedRole
            - iam:ListPolicyVersions
            - iam:DeleteServiceLinkedRole
            - iam:UntagInstanceProfile
            - iam:GetRolePolicy
            - iam:DeletePolicyVersion
            - iam:TagInstanceProfile
            - iam:SetDefaultPolicyVersion
            Resource:
            - arn:aws:iam::*:policy/*
            - arn:aws:iam::*:instance-profile/*
            - arn:aws:iam::*:role/*
            - arn:aws:iam::*:group/*
        -   Sid: VisualEditor4
            Effect: Allow
            Action: iam:ListInstanceProfiles
            Resource:
            - arn:aws:iam::*:policy/*
            - arn:aws:iam::*:instance-profile/*
            - arn:aws:iam::*:role/*
            - arn:aws:iam::*:group/*
        -   Sid: VisualEditor5
            Effect: Deny
            Action: iam:DeleteRolePermissionsBoundary
            Resource: '*'
        -   Sid: VisualEditor6
            Effect: Deny
            Action:
            - iam:CreatePolicy
            - iam:CreatePolicyVersion
            Resource: arn:aws:iam::*:policy/boundary/*
    path: /
-   policyName: EC2CapacityReservationService
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Effect: Allow
            Action:
            - ec2:DescribeReservedInstances
            - ec2:ModifyReservedInstances
            - ec2:PurchaseReservedInstancesOffering
            - ec2:DescribeInstances
            - ec2:DescribeAvailabilityZones
            - ec2:DescribeReservedInstancesOfferings
            Resource: '*'
    path: /
-   policyName: ResourceConfigurationCollectorPolicy
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Effect: Allow
            Action:
            - s3:CreateBucket
            - s3:PutBucketPolicy
            Resource: arn:aws:s3:::rcc-bucket-trustedservice-do-not-delete-*
        -   Effect: Allow
            Action:
            - s3:ListAllMyBuckets
            Resource: arn:aws:s3:::*
        -   Effect: Allow
            Action:
            - config:DescribeConfigurationRecorders
            - config:DescribeConfigurationRecorderStatus
            - config:PutConfigurationRecorder
            - config:StartConfigurationRecorder
            - config:DescribeDeliveryChannels
            - config:DescribeDeliveryChannelStatus
            - config:PutDeliveryChannel
            - config:DescribeAggregationAuthorizations
            - config:PutAggregationAuthorization
            - config:ListDiscoveredResources
            - config:BatchGetResourceConfig
            Resource: '*'
        -   Effect: Allow
            Action:
            - iam:GetRole
            - iam:PassRole
            - iam:CreateServiceLinkedRole
            - iam:DeleteServiceLinkedRole
            - iam:GetServiceLinkedRoleDeletionStatus
            Resource: arn:aws:iam::*:role/aws-service-role/config.amazonaws.com/*
    path: /
-   policyName: IAMNotinAction
    deletionPolicy: RETAIN
    policyDocument:
        Version: '2012-10-17'
        Statement:
        -   Sid: test
            Effect: Allow
            NotAction:
            - route53resolver:*
            - route53domains:*
            - route53:*
            - purchase-orders:*PurchaseOrders
            - organizations:*
            - networkmanager:*
            - iam:Update*
            - iam:Untag*
            - iam:Tag*
            - iam:SetSecurityTokenServicePreferences
            - iam:Set*
            - iam:ResyncMFADevice
            - iam:ResetServiceSpecificCredential
            - iam:Remove*
            - iam:Put*
            - iam:EnableMFADevice
            - iam:Detach*
            - iam:Delete*
            - iam:DeactivateMFADevice
            - iam:Create*
            - iam:ChangePassword
            - iam:Attach*
            - iam:Add*
            - globalaccelerator:*
            - ec2:SearchTransitGatewayRoutes
            - ec2:RestoreAddressToClassic
            - ec2:ResetNetworkInterfaceAttribute
            - ec2:ReplaceTransitGatewayRoute
            - ec2:ReplaceRouteTableAssociation
            - ec2:ReplaceRoute
            - ec2:ReplaceNetworkAclEntry
            - ec2:ReplaceNetworkAclAssociation
            - ec2:ReleaseAddress
            - ec2:RejectVpcPeeringConnection
            - ec2:RejectVpcEndpointConnections
            - ec2:RejectTransitGatewayVpcAttachment
            - ec2:MoveAddressToVpc
            - ec2:ModifyVpcTenancy
            - ec2:ModifyVpcPeeringConnectionOptions
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:ModifyVpcEndpointServiceConfiguration
            - ec2:ModifyVpcEndpointConnectionNotification
            - ec2:ModifyVpcEndpoint
            - ec2:ModifyVpcAttribute
            - ec2:ModifyTransitGatewayVpcAttachment
            - ec2:ModifySubnetAttribute
            - ec2:ModifyNetworkInterfaceAttribute
            - ec2:GetTransitGatewayRouteTablePropagations
            - ec2:GetTransitGatewayRouteTableAssociations
            - ec2:GetTransitGatewayAttachmentPropagations
            - ec2:ExportTransitGatewayRoutes
            - ec2:EnableVpcClassicLinkDnsSupport
            - ec2:EnableVpcClassicLink
            - ec2:EnableVgwRoutePropagation
            - ec2:EnableTransitGatewayRouteTablePropagation
            - ec2:DisassociateVpcCidrBlock
            - ec2:DisassociateTransitGatewayRouteTable
            - ec2:DisassociateSubnetCidrBlock
            - ec2:DisassociateRouteTable
            - ec2:DisassociateAddress
            - ec2:DisableVpcClassicLinkDnsSupport
            - ec2:DisableVpcClassicLink
            - ec2:DisableVgwRoutePropagation
            - ec2:DisableTransitGatewayRouteTablePropagation
            - ec2:DetachVpnGateway
            - ec2:DetachNetworkInterface
            - ec2:DetachInternetGateway
            - ec2:DetachClassicLinkVpc
            - ec2:DeleteVpnGateway
            - ec2:DeleteVpnConnectionRoute
            - ec2:DeleteVpnConnection
            - ec2:DeleteVpcPeeringConnection
            - ec2:DeleteVpcEndpoints
            - ec2:DeleteVpcEndpointServiceConfigurations
            - ec2:DeleteVpcEndpointConnectionNotifications
            - ec2:DeleteVpc
            - ec2:DeleteTransitGatewayVpcAttachment
            - ec2:DeleteTransitGatewayRouteTable
            - ec2:DeleteTransitGatewayRoute
            - ec2:DeleteTransitGateway
            - ec2:DeleteSubnet
            - ec2:DeleteRouteTable
            - ec2:DeleteRoute
            - ec2:DeleteNetworkInterfacePermission
            - ec2:DeleteNetworkInterface
            - ec2:DeleteNetworkAclEntry
            - ec2:DeleteNetworkAcl
            - ec2:DeleteNatGateway
            - ec2:DeleteInternetGateway
            - ec2:DeleteFlowLogs
            - ec2:DeleteEgressOnlyInternetGateway
            - ec2:DeleteDhcpOptions
            - ec2:DeleteCustomerGateway
            - ec2:CreateVpnGateway
            - ec2:CreateVpnConnectionRoute
            - ec2:CreateVpnConnection
            - ec2:CreateVpcPeeringConnection
            - ec2:CreateVpcEndpointServiceConfiguration
            - ec2:CreateVpcEndpointConnectionNotification
            - ec2:CreateVpcEndpoint
            - ec2:CreateVpc
            - ec2:CreateTransitGatewayVpcAttachment
            - ec2:CreateTransitGatewayRouteTable
            - ec2:CreateTransitGatewayRoute
            - ec2:CreateTransitGateway
            - ec2:CreateSubnet
            - ec2:CreateRouteTable
            - ec2:CreateRoute
            - ec2:CreateNetworkInterfacePermission
            - ec2:CreateNetworkInterface
            - ec2:CreateNetworkAclEntry
            - ec2:CreateNetworkAcl
            - ec2:CreateInternetGateway
            - ec2:CreateFlowLogs
            - ec2:CreateEgressOnlyInternetGateway
            - ec2:CreateDhcpOptions
            - ec2:CreateDefaultVpc
            - ec2:CreateDefaultSubnet
            - ec2:CreateCustomerGateway
            - ec2:AttachVpnGateway
            - ec2:AttachNetworkInterface
            - ec2:AttachInternetGateway
            - ec2:AttachClassicLinkVpc
            - ec2:AssociateVpcCidrBlock
            - ec2:AssociateTransitGatewayRouteTable
            - ec2:AssociateSubnetCidrBlock
            - ec2:AssociateRouteTable
            - ec2:AssociateDhcpOptions
            - ec2:AllocateAddress
            - ec2:AcceptVpcPeeringConnection
            - ec2:AcceptVpcEndpointConnections
            - ec2:AcceptTransitGatewayVpcAttachment
            - directconnect:*
            - cur:*
            - cloudtrail:stop*
            - cloudtrail:Remove*
            - cloudtrail:Put*
            - cloudtrail:Delete*
            - cloudtrail:Create*
            - cloudfront:*
            - budgets:ViewBudget
            - budgets:ModifyBudget
            - aws-portal:*Usage
            - aws-portal:*PaymentMethods
            - aws-portal:*Billing
            - account:*
            Resource: '*'
    path: /
-   policyName: Tef-Permission-Environment-DeveloperDelegated
    deletionPolicy: RETAIN
    policyDocument:
        Statement:
        -   Action: iam:CreateServiceLinkedRole
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - iam:RemoveRoleFromInstanceProfile
            - iam:DetachRolePolicy
            - iam:DeleteRole
            - iam:DeletePolicyVersion
            - iam:DeletePolicy
            - iam:CreateServiceLinkedRole
            - iam:CreatePolicyVersion
            - iam:CreatePolicy
            - iam:CreateInstanceProfile
            - iam:AddRoleToInstanceProfile
            Effect: Allow
            NotResource:
            - arn:aws:iam::*:role/vpc-flow-log*
            - arn:aws:iam::*:role/environment-readonly
            - arn:aws:iam::*:role/environment-developer
            - arn:aws:iam::*:role/environment-admin
            - arn:aws:iam::*:role/ccs-deployment
            - arn:aws:iam::*:role/OrganizationAccountAccessRole
            - arn:aws:iam::*:policy/vpc-flow-log*
            - arn:aws:iam::*:policy/permissions-environment-developer-boundary
            - arn:aws:iam::*:policy/permissions-environment-developer*
            - arn:aws:iam::*:policy/permissions-environment-admin-boundary
            - arn:aws:iam::*:policy/permissions-environment-admin*
            - arn:aws:iam::*:policy/permissions-create-role-developer
            - arn:aws:iam::*:policy/permissions-create-role-admin
            Sid: ''
        -   Action: iam:CreateRole
            Condition:
                ForAllValues:StringEquals:
                    aws:TagKeys: ManagedBy
                StringEquals:
                    aws:RequestTag/ManagedBy: environment-operator
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::731937104315:policy/permissions-environment-developer-boundary
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action: iam:TagRole
            Condition:
                StringEquals:
                    aws:ResourceTag/ManagedBy: environment-operator
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action: iam:DeleteRole
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - iam:PutRolePolicy
            - iam:PutRolePermissionsBoundary
            - iam:DeleteRolePolicy
            Condition:
                ForAllValues:StringEquals:
                    aws:TagKeys: ManagedBy
                StringEquals:
                    aws:ResourceTag/ManagedBy: environment-operator
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::731937104315:policy/permissions-environment-developer-boundary
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - iam:PutRolePolicy
            - iam:AttachRolePolicy
            Condition:
                StringLike:
                    iam:PermissionsBoundary: arn:aws:iam::731937104315:policy/permissions-environment-developer-boundary
            Effect: Allow
            Resource: '*'
            Sid: ''
        -   Action:
            - ec2:ModifyVpcEndpointServicePermissions
            - ec2:DescribeVpcEndpointServiceConfigurations
            - ec2:DeleteVpcEndpointServiceConfigurations
            - ec2:CreateVpcEndpointServiceConfiguration
            Effect: Allow
            Resource: '*'
            Sid: VPCLinksAccess
        -   Action: ec2:DisableEbsEncryptionByDefault
            Effect: Deny
            Resource: '*'
            Sid: DenyDisableEbsEncryptionAccess
        Version: '2012-10-17'
    path: /
roles:
-   roleName: AccessAnalyzerTrustedService
    deletionPolicy: RETAIN
    sessionDuration: 3600
    iamPath: /
    trustPolicy:
        Version: '2012-10-17'
        Statement:
        -   Sid: ''
            Effect: Allow
            Principal:
                AWS: arn:aws:iam::121925031476:root
            Action: sts:AssumeRole
            Condition:
                StringEquals:
                    sts:ExternalId: AccessAnalyzerTrustedServiceeJFDV4ffreHU
-   roleName: admin
    deletionPolicy: RETAIN
    sessionDuration: 43200
    iamPath: /
    trustPolicy:
        Version: '2012-10-17'
        Statement:
        -   Sid: ''
            Effect: Allow
            Principal:
                AWS: arn:aws:iam::727820809195:root
            Action: sts:AssumeRole
            Condition:
                StringEquals:
                    sts:ExternalId: IsengardExternalIdYZbe6SQaoQ6f
-   roleName: Administrator
    deletionPolicy: RETAIN
    sessionDuration: 43200
    iamPath: /
    trustPolicy:
        Version: '2012-10-17'
        Statement:
        -   Sid: ''
            Effect: Allow
            Principal:
                AWS: arn:aws:iam::727820809195:root
            Action: sts:AssumeRole
            Condition:
                StringEquals:
                    sts:ExternalId: IsengardExternalIdgEHGThVKrW0n
-   roleName: AmazonApiGwPushToCloudWatchLogGroup
    deletionPolicy: RETAIN
    description: Allows API Gateway to push logs to CloudWatch Logs.
    sessionDuration: 3600
    iamPath: /
    trustPolicy:
        Version: '2012-10-17'
        Statement:
        -   Sid: ''
            Effect: Allow
            Principal:
                Service: apigateway.amazonaws.com
            Action: sts:AssumeRole
-   roleName: AVMContainersUserRole
    deletionPolicy: RETAIN
    sessionDuration: 3600
    iamPath: /
    trustPolicy:
        Version: '2012-10-17'
        Statement:
        -   Sid: ''
            Effect: Allow
            Principal:
                AWS: arn:aws:iam::214732530209:root
            Action: sts:AssumeRole
            Condition:
                StringEquals:
                    sts:ExternalId: InspectorEnablementRoleTrXZuq3YRnAy
-   roleName: AWS-QuickSetup-SSM-RoleForEnablingExplorer
    deletionPolicy: RETAIN
    sessionDuration: 3600
    iamPath: /
    trustPolicy:
        Version: '2012-10-17'
        Statement:
        -   Effect: Allow
            Principal:
                Service: ssm.amazonaws.com
            Action: sts:AssumeRole
